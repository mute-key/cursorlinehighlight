"use strict";var Ms=Object.create;var Ct=Object.defineProperty;var Gs=Object.getOwnPropertyDescriptor;var Us=Object.getOwnPropertyNames;var Xs=Object.getPrototypeOf,js=Object.prototype.hasOwnProperty;var Ys=(e,t)=>{for(var n in t)Ct(e,n,{get:t[n],enumerable:!0})},oo=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Us(t))!js.call(e,r)&&r!==n&&Ct(e,r,{get:()=>t[r],enumerable:!(o=Gs(t,r))||o.enumerable});return e};var h=(e,t,n)=>(n=e!=null?Ms(Xs(e)):{},oo(t||!e||!e.__esModule?Ct(n,"default",{value:e,enumerable:!0}):n,e)),Vs=e=>oo(Ct({},"__esModule",{value:!0}),e);var il={};Ys(il,{activate:()=>ol,deactivate:()=>rl});module.exports=Vs(il);var Ws=h(require("vscode"));var Ze=h(require("vscode"));var qe=256,u=257,f=258,d=259,p=260;var g=513,O=514,b=515,A=516,S=517,T=518,m=519;var ro=544,io=545,so=546;var sn=769,cn=770,an=771;var z=777,q=778,Je=776,J=779,Z=780,Q=781,ee=782,te=783,ne=784;var gt=790,Ot=791,ht=792;var fe=793,pe=794,Te=795,me=796,Ee=797,Dt=1560,Lt=1562,Rt=2350,Nt=2348,yt=2352,bt=2350;var co=4097,Ce=4098,ao=4099;var lo=4353;var _={general:"general",cursorOnly:"cursorOnly",singleLine:"singleLine",multiLine:"multiLine",multiCursor:"multiCursor",selectionText:"selectionText",diagnosticText:"diagnosticText"},uo={name:void 0,renderLimiter:void 0,updateCaller:void 0,generalConfigInfo:{borderOpacity:void 0,backgroundOpacity:void 0,selectionTextEnabled:void 0,diagnosticTextEnabled:void 0},configError:void 0},xo={selectionTextEnabled:["selectionText","enabled"],diagnosticTextEnabled:["diagnosticText","enabled"]},fo={cursorOnlyText:g,singleLineText:O,multiLineCursorText:A,multiLineAnchorText:S,multiCursorText:T,multiCursorEdit:m},po={enabled:void 0,color:void 0,colorOpacity:void 0,backgroundColor:void 0,backgroundOpacity:void 0,fontStyle:void 0,fontWeight:void 0,leftMargin:void 0,cursorOnlyText:void 0,singleLineText:void 0,multiLineCursorText:void 0,multiLineAnchorText:void 0,multiCursorText:void 0,multiCursorEdit:void 0,selectionCountTextStyle:{ln:void 0,col:void 0,zCol:void 0,char:void 0,charOnly:void 0,lc:void 0,nth:void 0,count:void 0,opacity:void 0,fontStyle:void 0,fontWeight:void 0}},To={[u]:"cursorOnly",[f]:"singleLine",[d]:"multiLine",[p]:"multiCursor"},mo=["cursorOnlyText","singleLineText","multiLineCursorText","multiLineAnchorText","multiCursorText","multiCursorEdit"],Eo={leftMargin:void 0,placeholderDecorationOption:{},selectionDecorationOption:{ln:void 0,col:void 0,zCol:void 0,char:void 0,charOnly:void 0,lc:void 0,nth:void 0,count:void 0}},ge={isWholeLine:void 0,rangeBehavior:void 0,after:{}},Co={contentText:void 0,color:void 0,backgroundColor:void 0,fontWeight:void 0,fontStyle:void 0,textDecoration:void 0,margin:void 0},El={[qe]:{KEY:qe,MASK:15},[u]:{KEY:u,MASK:1},[f]:{KEY:f,MASK:2},[d]:{KEY:d,MASK:4},[p]:{KEY:p,MASK:8}},un={DiagnosticKind:void 0,placeTextOnPreviousOrNextLine:void 0,overlayCursorPosition:void 0,overrideLayoutPlaceholderColorToHighestSeverity:void 0,overrideAllOk:void 0,autoInlineDatumPoint:void 0},Js={openningBracket:void 0,closingBracket:void 0,lineEqual:void 0,lineUp:void 0,lineDown:void 0},go={enabled:void 0,leftMargin:void 0,visibility:un,glyphList:Js,problemPlaceholderContentText:void 0,allOkPlaceholderContentText:void 0,allOkContentText:void 0,diagnosticPlaceholderTextStyle:void 0,okNotationTextStyle:void 0,okTextStyle:void 0,okWorkspaceContentText:void 0,okEditorContentText:void 0,warningNotationTextStyle:void 0,warningTextStyle:void 0,warningWorkspaceContentText:void 0,warningEditorContentText:void 0,errorNotationTextStyle:void 0,errorTextStyle:void 0,errorWorkspaceContentText:void 0,errorEditorContentText:void 0},Oo={okNotationTextStyle:J,warningNotationTextStyle:Z,errorNotationTextStyle:Q},ho={okNotationTextStyle:ee,warningNotationTextStyle:te,errorNotationTextStyle:ne},Do={okNotationTextStyle:Je},Lo={contentText:void 0,notation:void 0},Ro={allOkPlaceholderContentText:["diagnosticPlaceholderTextStyle",void 0],allOkContentText:["okTextStyle","okNotationTextStyle"],problemPlaceholderContentText:["diagnosticPlaceholderTextStyle",void 0],okEditorContentText:["okTextStyle","okNotationTextStyle"],warningEditorContentText:["warningTextStyle","warningNotationTextStyle"],errorEditorContentText:["errorTextStyle","errorNotationTextStyle"],okWorkspaceContentText:["okTextStyle","okNotationTextStyle"],warningWorkspaceContentText:["warningTextStyle","warningNotationTextStyle"],errorWorkspaceContentText:["errorTextStyle","errorNotationTextStyle"]},No={problemPlaceholderContentText:q,allOkPlaceholderContentText:z,allOkContentText:Je,okEditorContentText:J,warningEditorContentText:Z,errorEditorContentText:Q,okWorkspaceContentText:ee,warningWorkspaceContentText:te,errorWorkspaceContentText:ne},yo=[["okNotationTextStyle","okTextStyle"],["warningNotationTextStyle","warningTextStyle"],["errorNotationTextStyle","errorTextStyle"]],bo=["problemPlaceholderContentText","allOkPlaceholderContentText","okWorkspaceContentText","okEditorContentText","allOkContentText","warningWorkspaceContentText","warningEditorContentText","errorWorkspaceContentText","errorEditorContentText"],So={[Ze.DiagnosticSeverity.Warning]:"warning",[Ze.DiagnosticSeverity.Error]:"error",[Ze.DiagnosticSeverity.Information]:void 0,[Ze.DiagnosticSeverity.Hint]:void 0},_o={leftMargin:void 0,diagnosticDecorationOption:{diagnosticPlaceholderTextStyle:void 0,okTextStyle:void 0,okNotationTextStyle:void 0,warningTextStyle:void 0,warningNotationTextStyle:void 0,errorTextStyle:void 0,errorNotationTextStyle:void 0}},ln={none:[0],bottom:[2,0],"top-bottom":[10],"top-right-bottom-left":[15,0],left:[1]},Zs={none:[0,0,0],"top-bottom":[8,2,0],left:[1,1,1]},St={[u]:ln,[f]:ln,[d]:Zs,[p]:ln},Io={isWholeLine:!1,borderWidth:"2px",borderStyle:"dotted",borderColor:"#ff0000",borderPosition:"bottom",backgroundColor:"#ff0000"},dn={borderOpacity:1,backgroundOpacity:.5,selectionTextEnabled:!1},Cl={selectionTextColor:"#FF0000",selectionTextOpacity:1,selectionTextBackgroundColor:null,selectionTextFontStyle:"normal",selectionTextFontWeight:"bold"};var vo=/(\${pre})/s,ko=/(\${post})/s,Wo=/(\${src})/s,Ao=/(\${wrn})/s,wo=/(\${err})/s,Po=/(\${editor})/s,Bo=/(\${workspace})/s,Ho=/(\${allok})/s,Ko=/(\${col})/s,Fo=/(\${zCol})/s,Mo=/(\${lc})/s;var Go=/(\${ln})/s,Uo=/(\${char})/s,Xo=/(\${charOnly})/s,jo=/(\${nth})/s,Yo=/(\${count})/s,Vo=e=>new RegExp(`^( {${e}}|[\r
]+)*`,"gm"),_t=/^[%\.].*[%\.]$/s,$o=/(\t|[\r\n]+)*$/gm;var zo=/(\${[A-z]*})/g,qo=/\${([^{}]+)}/s,Jo=/isWholeLine/s,Zo=/beforeCursor/s,Qo=/afterCursor/s,er=/atLineStart/s,tr=/selectionOnly/s;var It=578,xn=577,fn=580,vt=579,pn=581,Qe=583;var G=1,Tn=64,mn=16,U=32,kt=65,En=17,Oe=33,X=129;var Wt=1,Cn=1,gn=2;var nr=5,or=1,rr=12,ir=8,sr=10,cr=14,ar=18,lr=2,ur=20,dr=0,xr=1,fr=2,pr=3,Tr=32,mr=33;var B=37,re=38,he=42,De=50,Le=58,Re=74,Ne=82,ye=90,be=146,Se=154,_e=218;var Er={size:void 0,type:void 0,regex:void 0},Cr={appliedHighlight:[0],eventTrigger:[0],diagnosticSignature:[0],previousLine:[0]},ve=[u,f,d,p],gr=[u,f,d],Or={[qe]:[],[u]:[],[f]:[],[d]:[],[p]:[]},hr={[u]:void 0,[f]:void 0,[d]:void 0,[p]:void 0},Dr={override:0,severity:0,editor:{warning:{line:[],total:0},error:{line:[],total:0}},workspace:{warning:{source:0,total:0},error:{source:0,total:0}}},Lr={[g]:void 0,[O]:void 0,[A]:void 0,[S]:void 0,[T]:void 0,[m]:void 0},Rr={[B]:[],[re]:[],[he]:[],[De]:[],[Le]:[],[Re]:[],[Ne]:[],[ye]:[],[be]:[],[Se]:[],[_e]:[]},On=[re,he,De,Le,Re,Ne,ye,be,Se,_e],Nr={[fe]:void 0,[pe]:void 0,[Te]:void 0,[me]:void 0,[Ee]:void 0},hn=[B,...On],Ol={[sn]:J,[cn]:Z,[an]:Q},hl={[sn]:ee,[cn]:te,[an]:ne};var j=h(require("vscode"));var ke={diagnosticLineDelta:1,autoInlineDatumPoint:0,datumPointOfEditor:0},yr=e=>ke.autoInlineDatumPoint=e,We=e=>{let t=e.document.lineCount,n=[];for(;t--;)n.push(e.document.lineAt(t).range.end.character);ke.datumPointOfEditor=Math.ceil(Math.max(...n)*(ke.autoInlineDatumPoint/100))},br=(e,t)=>{let n=e.document.lineAt(e.selection.end.line+t).range.end.character,o=e.document.lineAt(e.selection.end.line).range.end.character;return n>o&&n>ke.datumPointOfEditor},At=(e,t)=>e.selection.end.line+t===e.document.lineCount,Sr=e=>e[e.length-1].end.line;var _r=(e,t)=>new j.Range(e,t);var wt=e=>{let t=new j.Position(e.selection.end.line,e.selection.end.character);return new j.Range(t,t)},Ir=e=>t=>t.document.lineAt(t.selection.end.line+(At(t,e)?0:ke.diagnosticLineDelta)).range,vr=e=>t=>t.document.lineAt(t.selection.end.line+(At(t,e)||br(t,e)?0:1)).range,kr=e=>t=>t.document.lineAt(Sr(t.selections)+(At(t,e)?0:ke.diagnosticLineDelta)).range,Wr=e=>t=>t.document.lineAt(Sr(t.selections)+(At(t,e)||br(t,e)?0:1)).range,ie=e=>new j.Range(e,e),Ar=e=>new j.Selection(e,e);var I=[];var jn=h(require("vscode"));var Mt=h(require("vscode"));var Pt=Symbol("prefix"),Bt=Symbol("postfix");var Kt=h(require("vscode"));var R={...Dr},Dn=()=>{R.editor.warning.line.splice(0),R.editor.warning.total=0,R.editor.error.line.splice(0),R.editor.error.total=0},Ln=()=>{R.workspace.warning.source=0,R.workspace.warning.total=0,R.workspace.error.source=0,R.workspace.error.total=0},ec=(e,t,n,o)=>{Object.keys(t).forEach(r=>{n===o&&(e.editor[r].line=[...new Set([...e.editor[r].line,...t[r].map(i=>i.range.start.line)])],e.editor[r].total=0,e.editor[r].total=t[r].length),t[r].length>0&&(e.workspace[r].source+=1,e.workspace[r].total+=t[r].length)})},tc=(e,t,n)=>{for(let o of t)if(o.severity<=Kt.DiagnosticSeverity.Warning){typeof e[n.fsPath]!="object"&&(e[n.fsPath]={});let r=So[o.severity];Array.isArray(e[n.fsPath][r])||(e[n.fsPath][r]=[]),e[n.fsPath][r].push(o)}},nc=e=>{let t=e.editor.error.total!==0||e.editor.warning.total!==0,n=e.workspace.error.total!==0||e.workspace.warning.total!==0;if(!t&&!n)return 1;let o=e.editor.warning.total<=e.editor.error.total&&t?4:2,r=e.workspace.warning.total<=e.workspace.error.total&&n?4:2;return Math.max(o,r)},oc=e=>[e.override,e.severity,[...e.editor.warning.line],e.editor.warning.total,[...e.editor.error.line],e.editor.error.total,e.workspace.warning.source,e.workspace.warning.total,e.workspace.error.source,e.workspace.error.total],Ht={},Pr=e=>{R.override=e},Br=e=>{for(let n in Ht)delete Ht[n];Ln(),Dn();let t=Kt.languages.getDiagnostics();for(let[n,o]of t)tc(Ht,o,n);for(let[n,o]of Object.entries(Ht))ec(R,o,n,e.fsPath);return R.severity=nc(R),oc(R)};var we={...Rr},Ae={...Nr},et=[],E=(e,t)=>{t.forEach(n=>{typeof n.after.contentText=="number"&&Object.hasOwn(tt,n.after.contentText)&&(tt[n.after.contentText]=n.after,Vr.push(n.after.contentText)),we[e].push([{get range(){return tt.rangeReference},renderOptions:n}])})},tt={rangeReference:void 0,[Dt]:void 0,[Lt]:void 0,[Rt]:void 0,[Nt]:void 0,[yt]:void 0,[bt]:void 0},Gr=()=>{let e=[];hn.forEach(o=>{e.push([o,we[o].length])}),Rn.isWholeLine=!0,Rn.rangeBehavior=Mt.DecorationRangeBehavior.ClosedClosed;let t=Math.max(...e.map(o=>o[1])),n=t;for(et?.forEach(o=>o.dispose()),et?.splice(0);n--;)et.push(Mt.window.createTextEditorDecorationType(Rn));e.forEach(o=>{let r=t-o[1];for(;r--;)we[o[0]].push([])})},Ur=()=>{for(let e of hn)we[e]=[]},rc={...un},Hr=(e,t)=>{let n=[],o=e.length,r=!1,i=!1,s=!1;for(;o--;){if(e[o]>t&&!i)i=!0;else if(e[o]<t&&!r)r=!0;else if(e[o]===t&&!s){s=!0,i=!1,r=!1;break}if(i&&r)break}return n.push(Ae[fe],s?Ae[Te]:"",r?Ae[me]:"",i?Ae[Ee]:"",Ae[pe]),n.join("")},ic={allok:gt},sc={editor:Ot,workspace:ht},se={pre:Pt,post:Bt},Xr={rangeFunction:wt,problemPlaceholderContentText:sc,allOkPlaceholderContentText:ic,allOkContentText:se,okWorkspaceContentText:se,okEditorContentText:se,warningEditorContentText:{...se,wrn:Dt},errorEditorContentText:{...se,err:Lt},errorWorkspaceContentText:{...se,src:yt,err:bt},warningWorkspaceContentText:{...se,src:Rt,wrn:Nt}},cc={allok:Ho},ac={editor:Po,workspace:Bo},ce={pre:vo,post:ko},Kr={wrn:Ao},Fr={src:Wo},Mr={err:wo},jr={problemPlaceholderContentText:ac,allOkPlaceholderContentText:cc,allOkContentText:ce,okWorkspaceContentText:ce,okEditorContentText:ce,warningWorkspaceContentText:{...ce,...Fr,...Kr},warningEditorContentText:{...ce,...Kr},errorWorkspaceContentText:{...ce,...Fr,...Mr},errorEditorContentText:{...ce,...Mr}},Rn={...ge},Ft=[0,0,[],0,[],0,0,0,0,0],Yr=e=>{Ft[0]=e},lc=e=>{let t=(e[3]?2:0)|(e[5]?4:0),n=(e[7]?2:0)|(e[9]?4:0);return t===0&&n===0?e[0]:(t?t<<5:32)|(n?n<<2:4)|2},uc=e=>{let t=e.length;for(;t--;)Ft[t]=e[t]},dc={[Dt]:({state:e,line:t})=>String(e[3])+Hr(e[2],t),[Lt]:({state:e,line:t})=>String(e[5])+Hr(e[4],t),[Rt]:({state:e})=>String(e[6]),[Nt]:({state:e})=>String(e[7]),[yt]:({state:e})=>String(e[8]),[bt]:({state:e})=>String(e[9])},Vr=[],xc=e=>t=>{tt[t].contentText=dc[t](e)},fc=e=>(t,n)=>{e(et[n],t)},Nn={line:0,state:Object.create(null)},nt=e=>t=>{e.eventTrigger[0]===Ce&&uc(Br(t.document.uri)),Nn.line=t.selection.end.line,Nn.state=Ft,Vr.forEach(xc(Nn)),tt.rangeReference=Xr.rangeFunction(t),we[lc(Ft)].forEach(fc(t.setDecorations))},$r=e=>{et.forEach(ae(e))},zr=()=>({functionOf:Xr,textOf:{contentText:we,glyphList:Ae},configOf:rc});var at=h(require("vscode"));var Tc=e=>Ar(e.end),mc=(e,t)=>e.end.line-t.end.line,Ec=(e,t,n)=>t===0||n[t-1]<=e,Cc=e=>e.isEmpty,gc=e=>e.selections=[...e.selections].sort(mc),Oc=e=>e.selections=e.selections.map(Tc),hc=e=>e.find(Cc)!==void 0,qr=e=>e.selections.every(Ec)?(Zr(e,gc),!0):!1,Jr=e=>hc(e.selections)?(Zr(e,Oc),!0):!1,Zr=async(e,t)=>await t(e);var Dc=e=>t=>t+e[0],Pe="contentText",yn="range",Lc={get contentText(){return this.indexList.map(Dc(this.baseIndex)).join(",")}},Rc=(e,t,n,o)=>e.map(r=>t(n,r,o)).join(", "),Nc={get contentText(){let{columnList:e,columnFunc:t,editor:n,detla:o}=this;return Rc(e,t,n,o)}},yc={get range(){return this.selectionBuffer[this.selectionBufferIndex]}},Qr=Object.getOwnPropertyDescriptor(Lc,Pe),ei=Object.getOwnPropertyDescriptor(Nc,Pe),ti=Object.getOwnPropertyDescriptor(yc,yn),Be=(e,t,n)=>{Object.defineProperty(e,t,n)},bn=(e,t,n)=>{let o={...e};return o.after={...e.after,baseIndex:n.baseIndex,indexList:[t.cursorIndex]},Be(o.after,Pe,Qr),n.baseIndex=o.after.baseIndex,n.indexList=o.after.indexList,t.overlay.indexListRefBuffer.push(n.indexList),o},Sn=(e,t,n)=>{let o={...e};return o.after={...e.after,editor:n.lineFn.editor,columnList:[t.selectionBuffer.length-1]},n.columnList=o.after.columnList,Be(o.after,Pe,ei),o},_n=(e,t)=>{e.after.baseIndex=[0],e.after.indexList=[],t.baseIndex=e.after.baseIndex,t.indexList=e.after.indexList,Be(e.after,Pe,Qr)},In=(e,t,n=0,o)=>{e.after.delta=n,e.after.columnFunc=t,e.after.columnList=[],o.columnList=e.after.columnList,Be(e.after,Pe,ei)};var ii=(e,t)=>n=>{switch(n.sign&Cn){case Cn:return vn[n.sign](n.body,e,t);case 0:switch(n.sign&gn){case gn:let o=vn[n.sign];return o(n.body,e);case 0:let r=vn[n.sign];return r(n.body,t);default:return null}default:return null}},Y={sign:Qe,body:(e,t)=>{let n=e.calibration;for(;n--;)e.baseIndexRefBuffer[n][0]+=1}},Ke={sign:pn,body:(e,t)=>{e.baseIndexRefBuffer.push(t)}},He={sign:vt,body:(e=0,t)=>{t.push(e+1)}},ni={sign:vt,body:(e=0,t)=>{t.unshift(t[0]-1)}};var si={sign:Qe,body:(e,t)=>{e.calibration++}},kn={sign:fn,body:e=>{e.baseIndex=[0]}},Wn={sign:It,body:e=>{e.cursorIndex=0}},An={sign:It,body:e=>{e.baseLine=e.currentLine}},oi={sign:xn,body:(e,t)=>{console.log("allocateIndexList",e.duplicateOverlayIndex),t.indexList=e.overlay.indexListRefBuffer[e.duplicateOverlayIndex]}},ci={[nr]:[He],[or]:[Y,Ke,He],[rr]:[Ke,He],[ir]:[He],[sr]:[Y,He],[cr]:[Y,He],[ar]:[oi,ni,Y],[lr]:[],[ur]:[si,Y,kn,Ke,Wn,An,oi,ni]},ri={sign:Qe,body:(e,t)=>{t.baseIndex=[e.calibration]}},ai={[dr]:[],[xr]:[si,Y,kn,Ke,Wn,An],[fr]:[Y],[pr]:[kn,Y,Wn,An],[Tr]:[ri,Ke],[mr]:[ri,Ke]},bc=(e,t)=>e(t),Sc=(e,t)=>e(t),_c=(e,t,n)=>e(t,n),Ic=(e,t,n)=>e(t.overlay,n),vc=(e,t,n)=>e(t.cursorIndex,n.indexList),kc=(e,t,n)=>e(t.overlay,n.baseIndex),vn={[It]:bc,[fn]:Sc,[xn]:_c,[Qe]:Ic,[vt]:vc,[pn]:kc};var Wc=(e=-1,t,n,o,r,i)=>(o<n?1:0)+(t>0?2:0)+(o===n?4:0)+(o===r?8:0)+(i>e+1?16:0),Ac=(e,t,n,o)=>(n<t?1:0)+(o>0?2:0)+(e===1&&o===0?32:0),li=(e,t)=>(n,o)=>{let r=n,i=t.positionList.get(o);i!==void 0&&(r=i(n,e,t));let s={selectionBufferIndex:e.selectionBuffer.length-1,selectionBuffer:e.selectionBuffer,renderOptions:r};Be(s,yn,ti),t.renderOption[o].push(s)},ui=(e,t)=>{e.duplicateOverlayIndex=e.lineBuffer.get(e.currentLine);let n=ii(e,t);if(e.duplicateOverlayIndex!==void 0){let r=Wc(e.duplicateOverlayIndex,e.overlay.calibration,e.baseLine,e.currentLine,e.previousLine,e.lineBuffer.size);return ci[r].forEach(n),!0}let o=Ac(e.selectionBuffer.length,e.baseLine,e.currentLine,e.overlay.calibration);return ai[o].forEach(n),!1},Gt=(e,t)=>{if(ui(e,t)){Ut(e);return}e.lineBuffer.set(e.currentLine,e.overlayIndex),Ut(e),t.contentText.forEach(li(e,t))},wn=(e,t)=>{if(ui(e,t)){Ut(e),t.columnList?.push(e.selectionBuffer.length-1);return}e.lineBuffer.set(e.currentLine,e.overlayIndex),Ut(e),t.contentText.forEach(li(e,t))},ot=(e,t,n,o)=>{o.lineFn.idx=n.cursorIndex,n.currentLine=e.end.line,n.selectionBuffer.push(e),o.statusFnChain.forEach(o.accumulate),t(n,o)},Pn=(e,t,n)=>o=>{ot(o,e,t,n)},Xt=(e,t)=>{t.lineFn.editor.selections.forEach(Pn(wn,e,t))},di=(e,t)=>{t.lineFn.editor.selections.forEach(Pn(wn,e,t))},xi=(e,t)=>{ot(t.lineFn.editor.selections[e.lastCount],wn,e,t)},fi=(e,t)=>{t.lineFn.editor.selections.forEach(Pn(Gt,e,t))},pi=(e,t)=>{ot(t.lineFn.editor.selections[0],Gt,e,t),ot(t.lineFn.editor.selections[1],Gt,e,t)},Ti=(e,t)=>{ot(t.lineFn.editor.selections[e.lastCount],Gt,e,t)},Ut=e=>{e.previousLine=e.currentLine,e.cursorIndex++,e.overlayIndex++};var le=(e,t)=>{e.baseLine=t.lineFn.editor.selection.end.line,e.cursorIndex=0};var rt=(e,t)=>{qr(t.lineFn.editor)&&(e.baseLine=t.lineFn.editor.selection.end.line,e.currentLine=t.lineFn.editor.selections[t.lineFn.editor.selections.length-1].end.line)},jt=(e,t)=>{Jr(t.lineFn.editor)};var V={...Lr},Fn={...Er},w={[g]:[],[O]:[],[b]:[],[T]:[],[m]:[]},k={[g]:[],[O]:[],[b]:[],[T]:[],[m]:[]},st={[g]:void 0,[O]:void 0,[S]:void 0,[A]:void 0,[T]:[]},Bn={...ge},mi=(e,t=0)=>{let n=e.selection.active.character+t,o=e.document.lineAt(e.selection.active.line).text.length+t;return n===o?n:n+"/"+o},Yc={col:e=>mi(e,1),zCol:e=>mi(e)},Vc={char:e=>e.selection.end.character-e.selection.start.character},Hn={ln:e=>e.selection.active.line+1},Ei={lc:ro,char:io,charOnly:so},$c={lc:e=>e.selection.end.line-e.selection.start.line+1,char:e=>e.document.getText(e.selection).length,charOnly:e=>e.document.getText(e.selection).replace(Fn.regex,"").length},Ci=(e,t=0,n=0)=>{let o=e.selections[t].active.character+n,r=e.document.lineAt(e.selections[t].active.line).text.length+n;return o===r?o:o+"/"+r},gi={count:({editor:e})=>e.selections.length,ln:({editor:e,idx:t})=>e.selections[t].end.line+1,lc:({editor:e,pos:t})=>e.selection.isSingleLine?e.selections.length:e.selections.length*(e.selections[t].end.line-e.selections[t].start.line+1),char:({editor:e,pos:t})=>e.selection.isSingleLine?e.selections[t].end.character-e.selections[t].start.character:e.document.getText(e.selections[t]).replace(Fn.regex,"").length},zc={col:0,zCol:0},Yt={ln:0},qc={char:0},Oi={col:0,zCol:0,count:0,nth:0,ln:0,lc:0,char:0},Jc={cursorOnlyText:{...zc,...Yt},singleLineText:{...Yt,...qc},multiLineCursorText:{...Yt,...Ei},multiLineAnchorText:{...Yt,...Ei},multiCursorText:Oi,multiCursorEdit:Oi},hi={col:Ko,zCol:Fo},Fe={char:Uo,ln:Go},Kn={lc:Mo,charOnly:Xo},Di={nth:jo,count:Yo},Ri={cursorOnlyText:{...hi,...Fe},singleLineText:{...Fe},multiLineCursorText:{...Fe,...Kn},multiLineAnchorText:{...Fe,...Kn},multiCursorText:{...Di,...Fe,...Kn},multiCursorEdit:{...Di,...hi,...Fe}},Zc=(e,t)=>({get range(){return st[e]},renderOptions:t}),Qc=(e,t)=>{w[e].forEach((n,o)=>{let r=[];t?.forEach(i=>{r.push(Zc(i,V[i]?.contentText[o]))}),k[e].push(r)})},Ge={[g]:[],[O]:[],[b]:[],[T]:[],[m]:[]},ea=(e,t,n)=>{t.forEach(o=>{Object.hasOwn(n,o[1])&&Ge[e].push([o[1],n[o[1]]])})},Ni=(e,t,n)=>{Bn.isWholeLine=!0,Bn.rangeBehavior=at.DecorationRangeBehavior.ClosedClosed;let o=t;for(;o--;){let s=at.window.createTextEditorDecorationType(Bn);w[e].push(s)}k[e].length>0&&(k[e]=[]);let i={[g]:{renderOptionHex:[g],fnObject:{...Hn,...Yc}},[O]:{renderOptionHex:[O],fnObject:{...Hn,...Vc}},[b]:{renderOptionHex:[S,A],fnObject:{...Hn,...$c}},[T]:{renderOptionHex:[T],fnObject:{...gi}},[m]:{renderOptionHex:[m],fnObject:{...gi}}}[e];Qc(e,i.renderOptionHex),ea(e,n,i.fnObject)},Ue=(e,t,n)=>{switch(t){case u:yi[e]=n;break;case f:ki[e]=n;break;case d:Ai[e]=n;break;case T:Pi[e]=n;break;case m:Bi[e]=n;break;default:break}},Mn=(e,t)=>(n,o)=>{e(t[o],n)},Gn=(e,t)=>([n,o])=>{e[n].contentText=o(t).toString()},yi={ln:void 0,col:void 0,zCol:void 0},bi=(e,t)=>{Object.hasOwn(it,e)&&(it[e]=t)},Si=(e,t)=>{Object.hasOwn(v,e)&&(v[e]=t)},Un=()=>{let e=V[T];e!==void 0&&(ct.contentText=e.contentText);let t=V[m];t!==void 0&&(H.contentText=t.contentText)},_i=()=>{ct.accumulate=Li(de,ue,Pi),H.accumulate=Li(de,ue,Bi)},Ii=()=>{it.nth&&(_n(V[T]?.contentText[it.nth],ct),ct.positionList.set(it.nth,bn)),v.nth&&(_n(V[m]?.contentText[v.nth],H),H.positionList.set(v.nth,bn)),v.col?(In(V[m]?.contentText[v.col],Ci,1,H),H.positionList.set(v.col,Sn)):v.zCol&&(In(V[m]?.contentText[v.zCol],Ci,0,H),H.positionList.set(v.zCol,Sn))},Xn=(e,t)=>{switch(e[0]){case u:w[g].forEach(ae(t));break;case f:w[O].forEach(ae(t));break;case d:w[b].forEach(ae(t));break;case p:Hi();break;default:break}},vi=(e,t)=>{$t(e),Ge[g].forEach(Gn(yi,e)),st[g]=ie(e.selection.active),k[g].forEach(Mn(e.setDecorations,w[g]))},ki={ln:void 0,char:void 0},Wi=(e,t)=>{Xn(t,e.setDecorations),Ge[O].forEach(Gn(ki,e)),st[O]=ie(e.selection.active),k[O].forEach(Mn(e.setDecorations,w[O]))},Ai={ln:void 0,lc:void 0,char:void 0,charOnly:void 0},wi=(e,t)=>{d!==t[0]&&Xn(t,e.setDecorations),Ge[b].forEach(Gn(Ai,e)),st[S]=ie(e.selection.anchor),st[A]=ie(e.selection.active),k[b].forEach(Mn(e.setDecorations,w[b]))},Pi={nth:void 0,count:void 0,ln:void 0,lc:void 0,char:void 0},Bi={nth:void 0,count:void 0,ln:void 0,col:void 0,zCol:void 0},Li=(e,t,n)=>([o,r])=>{switch(o){case"char":t[o]+=r(e),n[o].contentText=t[o].toString();break;default:n[o].contentText=r(e).toString();break}},ta={baseIndexRefBuffer:[],indexListRefBuffer:[],calibration:0},de={editor:at.window.activeTextEditor,pos:0,char:0,idx:0},ue={nth:0,count:0,ln:0,lc:0,char:0},na=()=>{ue.nth=0,ue.count=0,ue.ln=0,ue.lc=0,ue.char=0},it={nth:null,ln:null},v={nth:null,col:null,zCol:null},C={strategyKey:0,selectionReference:[],selectionBuffer:[],lineBuffer:new Map,cursorIndex:0,baseLine:-1,currentLine:-1,previousLine:-1,duplicateOverlayIndex:-1,lastCount:0,overlayIndex:0,overlay:ta},ct={renderOption:k[T],statusFnChain:Ge[T],accumulate:void 0,lineFn:de,positionList:new Map,baseIndex:[],indexList:[],contentText:[]},H={renderOption:k[m],statusFnChain:Ge[m],accumulate:void 0,lineFn:de,positionList:new Map,baseIndex:[],indexList:[],columnList:[],contentText:[]},Hi=()=>(C.strategyKey=0,C.selectionBuffer.length=0,C.lineBuffer.clear(),C.cursorIndex=0,C.baseLine=-1,C.currentLine=-1,C.previousLine=-1,C.duplicateOverlayIndex=-1,C.lastCount=0,C.overlayIndex=0,C.overlay.baseIndexRefBuffer.length=0,C.overlay.indexListRefBuffer.length=0,C.overlay.calibration=0,Un(),na(),Vt(T,de.editor.setDecorations),Vt(m,de.editor.setDecorations),!0);var oa=(e,t)=>(n,o)=>e(n,t[o]),ra=(e,t)=>w[e].forEach(oa(t,k[e])),Vt=(e,t)=>{w[e].forEach(ae(t)),k[e].forEach((n,o)=>{k[e][o].length=0})},Me=(e,t)=>{Hi(),Vt(T,t.lineFn.editor.setDecorations),Vt(m,t.lineFn.editor.setDecorations)},ia=e=>e?H:ct,sa=e=>e?T+Wt:T,ca=e=>(e&Wt)===Wt,aa=(e,t,n,o,r,i,s)=>{let a=r===-1,c=e!==t,l=o===0,x=o===n,y=n>2,rn=n-o===1,ze=s<i,ws=s===i,Ps=s>i,Bs=i<s,Hs=s===r,Ks=s>r,Fs=0|(e?1:0)|(t?2:0)|(c?16:0)|(a?32:0)|(l?256:0)|(x?512:0)|(y?1024:0)|(rn?4096:0)|(ze?65536:0)|(ws?1<<17:0)|(Ps?1<<18:0)|(Bs?1<<19:0)|(Hs?1<<20:0)|(Ks?1<<21:0);return{2883872:mn,2888704:U,2233344:U,1119232:U,1184768:U,70656:U,66560:U,2884896:Tn,2884899:kt,2883875:kt,2888707:En,2233347:Oe,2167811:Oe,70659:Oe,66563:Oe,2229763:X,2885123:X,2884611:X,2229251:X,2163715:X,2164227:X,2229265:G,2228241:G,2229777:G,1114115:G,2162691:G,2228739:G}[Fs]},la={[mn]:[Me,le,pi],[U]:[Ti],[Tn]:[Me,le,rt,fi],[kt]:[Me,le,rt,Xt],[En]:[jt,xi],[Oe]:[Me,le,rt,jt,Xt],[X]:[Me,le,di],[G]:[rt,jt,Me,le,Xt]},ua=async e=>e.selection.isEmpty!==e.selections[e.selections.length-1].isEmpty?(e.selections=await[...e.selections.slice(0,e.selections.length-1)],!0):!1,da=(e,t)=>n=>n(e,t),Ki=async(e,t)=>{await ua(e),C.strategyKey===0&&await $t(e,gr),C.strategyKey=aa(e.selection.isEmpty,e.selections[e.selections.length-1].isEmpty,e.selections.length,C.lastCount,C.baseLine,C.previousLine,e.selections[e.selections.length-1].end.line);let n=ca(C.strategyKey);la[C.strategyKey].forEach(da(C,ia(n))),ra(sa(n),e.setDecorations),C.lastCount=e.selections.length},Fi=e=>{de.editor=e},$t=(e,t=ve)=>{for(let n of t)Xn([n],e.setDecorations)};var zt=()=>({functionOf:Jc,textOf:V,infoOf:Fn});var lt={[u]:[],[f]:[],[d]:[],[p]:[]},ut={...Cr},Mi=e=>jn.window.createTextEditorDecorationType(e),dt=(e,t,n)=>e(t,n),ae=e=>t=>e(t,I),Gi=e=>{e.eventTrigger[0]=co,e.appliedHighlight[0]=u,e.diagnosticSignature[0]=B},xa=e=>{qn(e),$t(e),$r(e.setDecorations)},$=()=>jn.window.visibleTextEditors.forEach(xa),qt=e=>{let t=zt();t.infoOf.size=Number(e.options.tabSize??e.options.indentSize??4),t.infoOf.type=e.options.insertSpaces?`
`:"	",t.infoOf.regex=e.options.insertSpaces?Vo(t.infoOf.size):$o},fa=(e,t,n)=>o=>{let r=[];r.push(t[o]),e.generalConfigInfo.selectionTextEnabled&&r.push(n[o]),e.generalConfigInfo.diagnosticTextEnabled&&(o===u||o===f)?r.push(pa):e.generalConfigInfo.diagnosticTextEnabled&&r.push(nt(ut)),lt[o].push(...r)},Xe=e=>{let t={[u]:Yn,[f]:Vn,[d]:$n,[p]:zn},n={[u]:vi,[f]:Wi,[d]:wi,[p]:Ki};ve.forEach(fa(e,t,n))},pa=e=>{e.selections[0].start.line!==ut.previousLine[0]&&nt(ut)(e),e.document.isDirty&&We(e),ut.previousLine[0]=e.selections[0].start.line},Ta=(e,t)=>n=>n(e,t),je=(e,t)=>{let n=Ta(e,t);return e.selections.length===1?e.selections[0].isEmpty?(lt[u].forEach(n),u):e.selections[0].isSingleLine?(lt[f].forEach(n),f):(lt[d].forEach(n),d):(lt[p].forEach(n),p)},Ui=()=>({stateOf:ut});var P={...Or},ma={...hr},Yn=(e,t)=>{u!==t[0]&&qn(e),dt(e.setDecorations,P[u][0],[ie(e.selection.active)])},Vn=(e,t)=>{f!==t[0]&&xe(e.setDecorations,t,I),dt(e.setDecorations,P[f][0],[_r(e.selection.start,e.selection.end)])},Jt=[[Object.create(null)],[Object.create(null)],[Object.create(null)]],Ea=(e,t)=>(n,o)=>e(n,t[o]),$n=(e,t)=>{d!==t[0]&&xe(e.setDecorations,t,I),Jt[0][0]=e.document.lineAt(e.selection.start).range,Jt[1][0]=e.document.lineAt(e.selection.end).range,Jt[2][0]=e.selection,P[d].forEach(Ea(e.setDecorations,Jt))},zn=(e,t)=>{xe(e.setDecorations,t,I),dt(e.setDecorations,P[p][0],[...e.selections]),dt(e.setDecorations,P[p][1],[...e.selections])},Zt=(e,t)=>n=>e(n,t),xe=(e,t,n)=>{switch(t[0]){case u:P[u].forEach(Zt(e,n));break;case f:P[f].forEach(Zt(e,n));break;case d:P[d].forEach(Zt(e,n));break;case p:P[p].forEach(Zt(e,n));break;default:break}},qn=e=>{xe(e.setDecorations,[u],I),xe(e.setDecorations,[f],I),xe(e.setDecorations,[d],I),xe(e.setDecorations,[p],I)},lu={[u]:(e,t)=>Yn(e,t),[f]:(e,t)=>Vn(e,t),[d]:(e,t)=>$n(e,t),[p]:(e,t)=>zn(e,t)};var Xi=()=>({styleOf:P,infoOf:ma});var Qi=h(require("vscode"));var xt=h(require("vscode"));var Jn=class{#e;#t;constructor(t,n){this.#e=t,this.#t=n}get(){return{section:this.#e,message:this.#t}}},Zn=class{static ignored=!1;static notified=!1;static packageName;static errorList=[];static configurationSectionList(){return this.errorList.map(t=>t.get().section)}static ifExtensionName(t){return t.indexOf(this.packageName)!==-1&&t.split(".").length>2?t.replace(this.packageName+".",""):t}static pushErrorMessage(){return xt.window.showErrorMessage("Please revise invalid values in configuration.","Fix Configuration","Ignore")}static userSelect(t){return function(n){return n==="Fix Configuration"?(xt.commands.executeCommand("workbench.action.openSettings",t),!1):!0}}static fixConfiguration(){return async()=>{this.ignored=await this.pushErrorMessage().then(this.userSelect(this.configurationSectionList().join(" ")))}}static pushMessage(t){return()=>xt.window.showInformationMessage(t)?.then(()=>{})}},D=class extends Zn{static configurationUpdated(){this.notified=!1,this.ignored=!1}static setPackageName(t){this.packageName=t}static check(){return this.errorList.length>0}static register(t,n){return this.errorList.push(new Jn(t,n))}static clear(){this.errorList.splice(0)}static notify(t=0){if(this.check()&&!this.notified&&!this.ignored){this.notified=!0,setTimeout(this.fixConfiguration(),t);return}setTimeout(this.pushMessage("Config has been updated succeefully. Configuration Reloaded... (Messaage Dismiss in 2 second.)"),t)}};var Qt=h(require("vscode"));var ji=()=>{let e=N("editor");e.update("renderLineHighlight","gutter",Qt.ConfigurationTarget.Global),e.update("roundedSelection",!1,Qt.ConfigurationTarget.Global)};var ft=e=>{if(!(!e||e==="null"||e.length===0||_t.test(e)))return e},Yi=e=>e.filter(t=>t!==void 0&&t.length>0||typeof t!="string"),Vi=e=>e==="null"||e.length===0?null:e;var en=(e,t,n,o)=>{let r=o||4,i=[];for(;r--;)e>>r&1?i.push(Array.isArray(t)?t[r]:t):i.push(n);return i};var $i=(e,t)=>{let n=e.match(t),o=[];if(n&&n.index!==void 0)return o=e.split(t),o[0].length===0?(delete o[0],{position:0,array:[...o]}):o[2].length===0?(delete o[2],{position:1,array:[...o]}):{position:1,array:o}},K=(e,t=.6,n,o)=>{e=e.replace(/^#/,""),e.length===3&&(e=e.split("").map(c=>c+c).join("")),/^[0-9A-Fa-f]{6}$/.test(e)||(e=n.replace(/^#/,""),t=o);let i=parseInt(e.substring(0,2),16),s=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16);return`rgba(${i}, ${s}, ${a}, ${t})`};var zi=(e,t)=>e.length===t.length&&e.every((n,o)=>n[0]===t[o][0]&&n[1]===t[o][1]);var qi=h(require("vscode"));var Ji=e=>`0 0 0 ${e}`,ga=e=>{if(e)return{...e,array:e.array.filter(t=>t!==void 0)}},tn=(e,t)=>{let n={...e};return n.after={...e.after},n.after.contentText=t,n},Oa=(e,t,n,o,r,i)=>{let s=ga($i(r.nextSearchString,o));s&&(Object.hasOwn(t,n)&&(s.array[s.position]=t[n]),i?(e.contentText?.push(...s.array),e.position[r.lastPosition+s.position]=n):s.position===0?(e.contentText?.push(s.array[0]),e.position[r.lastPosition+s.position]=n,r.nextSearchString=s.array[1],r.lastPosition=r.lastPosition+s.position+1):s.position===1&&s.array.length===2?(e.position[r.lastPosition+s.position]=n,e.contentText?.push(...s.array)):s.position===1&&s.array.length===3&&(e.contentText?.push(s.array[0],s.array[1]),e.position[r.lastPosition+s.position]=n,r.nextSearchString=s.array[2],r.lastPosition=r.lastPosition+s.position+1))},Zi=(e,t,n,o,r)=>{let i=e.match(zo);if(i!==null&&Object.hasOwn(o,t)){i.length>Object.keys(o[t]).length&&D.register(r+"."+t,"numbers of placeholder exceed availability");let s={nextSearchString:e,lastPosition:0};n.textOf[t].contentText=[],i.forEach((a,c)=>{let l=a.match(qo);l&&(Object.hasOwn(o[t],l[1])?Oa(n.textOf[t],n.functionOf[t],l[1],o[t][l[1]],s,c===i.length-1):D.register(r+"."+t,`Invalid placeholder '${l[1]}' is set in user configration. Load default value instead for now. Please revise the value entered.`))}),n.textOf[t].contentText=Yi(n.textOf[t].contentText)}else n.textOf[t].contentText=[e]},pt=(e,t=!0,n=void 0)=>{let o={...ge};if(o.isWholeLine=t,o.rangeBehavior=qi.DecorationRangeBehavior.ClosedOpen,o.after={...Co},n&&(o.after.contentText=n),!!e.color)return o.after.color=K(e.color,e.colorOpacity,"#333333",.7),e.backgroundColor&&e.backgroundColor!=="null"&&e.backgroundColor.length>0?o.after.backgroundColor=K(e.backgroundColor,e.backgroundOpacity,"#333333",.7):delete o.after.backgroundColor,e.fontWeight!=="normal"?o.after.fontWeight=e.fontWeight:delete o.after.fontWeight,e.fontStyle!=="normal"?o.after.fontStyle=e.fontStyle:delete o.after.fontStyle,delete o.after.margin,delete o.after.textDecoration,o};var N=e=>Qi.workspace.getConfiguration(e),Qn={borderColor:{of:"borderOpacity",fn:(e,t,n)=>K(e,t,n)},backgroundColor:{of:"backgroundOpacity",fn:(e,t,n)=>K(e,t,n)}},Tt=(e,t,n,o)=>{try{let r=e.get(t,n);return r===void 0&&console.warn(`Config value for ${t} is undefined or caused an error. Using default value.`),typeof r=="string"?Vi(r):r}catch(r){return o&&D.register(o+"."+t,`Failed to get config value for ${o+"."+t}:`),console.error(`Failed to get config value for ${e+"."+t}:`,r),e.inspect(t)?.defaultValue}},mt=(e,t,n,o,r)=>{Object.entries(e).forEach(([i,s])=>{if(typeof s!="object"){let a=Tt(N(t),i,"not found",t);if(a&&r&&o&&n&&n.includes(i)){let c={contentText:[],position:{}};o.textOf[i]={...c},Zi(a,i,o,r,t)}Object.hasOwn(e,i)&&a!==void 0&&(e[i]=a)}else mt(e[i],t+"."+i,n,o)})};var ha=e=>e,Da=(e,t)=>{let n=To[t],o=Io,r=N(e.name+"."+n);return Object.entries(o).reduce((i,[s,a])=>{let c=Tt(r,ha(s),a,e.name+"."+n);if(c!=null)if(Object.hasOwn(Qn,s)){let l=Qn[s];i[s]=l.fn(c,e.generalConfigInfo[l.of],a)}else i[s]=c;return i},{})},La=e=>(e.border=`${e.borderStyle} ${e.borderColor};`,delete e.borderStyle,delete e.borderColor,e),Ra=(e,t,n)=>{try{let o=n(e,t);if(!o||o.length===0)return;let r=o.reduce((i,s)=>{let a={...e};return a.borderWidth=s,i.push(a),i},[]).reduce((i,s,a)=>(t===d&&a!==2&&delete s.backgroundColor,i.push(Mi(La(s))),i),[]);return r.length===0?void 0:r}catch(o){console.log("creating decoration type thrown error:",t,o);return}},Na=(e,t)=>{if(Object.hasOwn(St,t))return Object.hasOwn(St[t],String(e.borderPosition))?ya(e,St[t][e.borderPosition]):void 0},ya=(e,t)=>{let n=[];for(let o of t){let r=en(o,String(e.borderWidth),"0");n.push(r.join(" "))}return n},ba=(e,t)=>{let n=t.replaceAll(" ","").split("|"),o=!1,r=!1,i=!1,s=!1,a=!1;return n.length>1&&(o=Jo.test(n[1]),r=Zo.test(n[1]),i=Qo.test(n[1]),s=er.test(n[1]),a=tr.test(n[1]),e===d&&n[0]==="left"&&(o=!0)),{isWholeLine:o,borderPosition:n[0],beforeCursor:r,afterCursor:i,atLineStart:s,selectionOnly:a}},Et=e=>{for(let t in e.generalConfigInfo)if(t==="diagnosticTextEnabled"||t==="selectionTextEnabled"){let n=xo[t],o=N(e.name+"."+n[0]),r=Tt(o,n[1],dn[t],e.name+"."+n[0]);e.generalConfigInfo[t]=r}else{let n=N(e.name+"."+_.general);e.generalConfigInfo[t]=Tt(n,t,dn[t],e.name+"."+_.general)}},W=(e,t)=>{let n=Xi();n.styleOf[t]&&n.styleOf[t].forEach(s=>s.dispose());let o=Da(e,t),r=ba(t,String(o.borderPosition));n.infoOf[t]=r,o.borderPosition=r.borderPosition,o.isWholeLine=r.isWholeLine;let i=Ra(o,t,Na);if(!i)return!1;n.styleOf[t]=i,delete n.styleOf,delete n.infoOf},es=e=>{Et(e);for(let t of ve)W(e,t);return!0};var eo=h(require("vscode"));var ts={borderOpacity:"general.borderOpacity",backgroundOpacity:"general.backgroundOpacity",statusTextEnabled:"selectionText.enabled",statusTextIconEnabled:"selectionText.iconEnabled",statusTextColor:"selectionText.color",statusTextBackgroundColor:"selectionText.backgroundColor",statusTextOpacity:"selectionText.opacity",statusTextFontStyle:"selectionText.fontStyle",statusTextFontWeight:"selectionText.fontWeight",cursorOnlyBorderColor:"cursorOnly.borderColor",cursorOnlyBackgroundColor:"cursorOnly.backgroundColor",cursorOnlyBorderPosition:"cursorOnly.borderPosition",cursorOnlyBorderWidth:"cursorOnly.borderWidth",cursorOnlyBorderStyle:"cursorOnly.borderStyle",cursorOnlyBorderStyleWithafterCursor:"cursorOnly.borderStyleWithafterCursor",singleLineBorderColor:"singleLine.borderColor",singleLineBackgroundColor:"singleLine.backgroundColor",singleLine:"singleLine.borderPosition",singleLineBorderWidth:"singleLine.borderWidth",singleLineBorderStyle:"singleLine.borderStyle",multiLineBorderColor:"multiLine.borderColor",multiLineBackgroundColor:"multiLine.backgroundColor",multiLineBorderPosition:"multiLine.borderPosition",multiLineBorderWidth:"multiLine.borderWidth",multiLineBorderStyle:"multiLine.borderStyle",multiCursorBorderColor:"multiCursor.borderColor",multiCursorBackgroundColor:"multiCursor.backgroundColor",multiCursorBorderPosition:"multiCursor.borderPosition",multiCursorBorderWidth:"multiCursor.borderWidth",multiCursorBorderStyle:"multiCursor.borderStyle"},Sa=(e,t,n)=>e.update(t,n,eo.ConfigurationTarget.Global),_a=(e,t)=>e.update(t,void 0,eo.ConfigurationTarget.Global),ns=async e=>{let t=N(e.name);Object.entries(t).forEach(async([n,o])=>{if((typeof o=="string"||typeof o=="number"||typeof o=="boolean")&&Object.hasOwn(ts,n)){let r=ts[n];await Sa(t,r,o),await _a(t,n)}})};var Ia=(e,t)=>e.contentText.map((n,o)=>{let r=typeof n=="string"?t.placeholderDecorationOption:t.selectionDecorationOption[e.position[o]],i=tn(r,n);return typeof n=="symbol"&&(e.position[o]=i.after.contentText),i}).filter(n=>n!==void 0),va=(e,t)=>{t.placeholderDecorationOption=pt(e,!0),Object.keys(t.selectionDecorationOption).forEach((n,o)=>{let r={color:e.selectionCountTextStyle[n],colorOpacity:e.selectionCountTextStyle.opacity,fontStyle:e.selectionCountTextStyle.fontStyle,fontWeight:e.selectionCountTextStyle.fontWeight};t.selectionDecorationOption[n]=pt(r,!0)})},ka=(e,t)=>{Object.entries(t.cursorOnlyText.position).forEach(([c,l])=>{let x=e[g].contentText[c].after;Ue(l,u,x)}),Object.entries(t.singleLineText.position).forEach(([c,l])=>{let x=e[O].contentText[c].after;Ue(l,f,x)});let r=Object.entries(t.multiLineAnchorText.position),i=Object.entries(t.multiLineCursorText.position);zi(r,i)&&r.forEach(([c,l],x)=>{let y=e[S].contentText[c].after;e[A].contentText[c].after=y,Ue(l,d,y)}),Object.entries(t.multiCursorText.position).forEach(([c,l])=>{let x=e[T].contentText[c].after;Ue(l,T,x),bi(l,parseInt(c))}),Object.entries(t.multiCursorEdit.position).forEach(([c,l])=>{let x=e[m].contentText[c].after;Ue(l,m,x),Si(l,parseInt(c))}),Un(),Ii(),_i()},Wa=(e,t,n,o)=>{Object.entries(t).forEach(([l,x],y)=>{let rn=Ia(x,n),ze=fo[l];e[ze]={contentText:rn,position:Object.entries(x.position)},(o&&o!=="0px"||o!=="0em")&&e[ze].contentText[0]&&(e[ze].contentText[0].after.margin=Ji(o))});let r=e[g],i=e[O],s=e[S],a=e[T],c=e[m];[[g,r.contentText.length,r.position],[O,i.contentText.length,i.position],[b,s.contentText.length,s.position],[T,a.contentText.length,a.position],[m,c.contentText.length,c.position]].forEach(([l,x,y])=>{Ni(l,x,y)}),ka(e,t)},Ye=(e,t=!1)=>{let n={...po},o={...Eo},r=zt(),i={functionOf:r.functionOf,textOf:{}};return mt(n,e+"."+_.selectionText,mo,i,Ri),va(n,o),Wa(r.textOf,i.textOf,o,n.leftMargin),delete r.functionOf,delete r.infoOf,delete r.textOf,delete i.textOf,delete i.functionOf,!0};var Aa=["pre","post"],wa={pre:"prefix",post:"postfix"},Pa=(e,t,n)=>{let o=t.sidePadding!=="null"?t.sidePadding:null,r=t.topDownPadding!=="null"?t.topDownPadding:null;Object.entries(e).forEach(([i,s])=>{s.map(a=>a.filter(c=>c.length>0)).forEach((a,c,l)=>{t.backgroundColor&&t.backgroundOpacity&&(e[i][c][0].renderOptions.after.backgroundColor=K(t.backgroundColor,t.backgroundOpacity,"#333333",.7)),t.borderRadius&&(c===0&&(e[i][0][0].renderOptions.after.textDecoration=`;border-top-left-radius:${t.borderRadius};border-bottom-left-radius:${t.borderRadius};padding-left:${o}`),c===l.length-1&&(e[i][c][0].renderOptions.after.textDecoration=`;border-top-right-radius:${t.borderRadius};border-bottom-right-radius:${t.borderRadius};padding-right:${o}`)),r&&(e[i][c][0].renderOptions.after.textDecoration+=`;padding-top:${r};padding-bottom:${r}`),n!=="0px"&&n!=="0em"&&n&&c===0&&(e[i][0][0].renderOptions.after.textDecoration+=`;margin-left:${n}`)})})},Ba=({textPosition:e,primaryStyle:t,secondaryStyle:n,notation:o,leftMargin:r})=>e.contentText.map((i,s)=>{let a=e.position[s],c=t;if(Aa.includes(a)){if(!Object.hasOwn(o,wa[a]))return;c=n}return tn(c,i)}).filter(i=>i!==void 0),Ha=(e,t,n,o,r="")=>{let i=(a,c,l,x)=>{if(Object.hasOwn(c[l],x)){c[l][x].notation&&(a.notation=c[l][x].notation);let y=Ba(a);c[l][x].contentText=y}};Object.entries(n).forEach(([a,c])=>{let l=Ro[a],x={textPosition:c,primaryStyle:o.diagnosticDecorationOption[l[0]],secondaryStyle:l[1]?o.diagnosticDecorationOption[l[1]]:null,notation:[],leftMargin:r};["workspace","editor","all","layout"].forEach(y=>{i(x,e,y,No[a])})});let s=a=>a.contentText.map(c=>(c.after.contentText===Pt&&(c.after.contentText=a.notation.prefix?a.notation.prefix:void 0),c.after.contentText===Bt&&(c.after.contentText=a.notation.postfix?a.notation.postfix:void 0),c)).filter(c=>c.after.contentText!==void 0);e.layout[z].contentText.forEach(a=>{if(a.after.contentText===gt){let c=s(e.all[Je]);E(B,[...c])}else E(B,[{...a}])}),e.layout[q].contentText.forEach(a=>{if(a.after.contentText===Ot){let c=s(e.editor[J]),l=s(e.editor[Z]),x=s(e.editor[Q]);E(re,[...c]),E(he,[...c]),E(De,[...c]),E(Le,[...c]),E(Re,[...l]),E(Ne,[...l]),E(ye,[...l]),E(be,[...x]),E(Se,[...x]),E(_e,[...l,...x]);return}if(a.after.contentText===ht){let c=s(e.workspace[ee]),l=s(e.workspace[te]),x=s(e.workspace[ne]);E(re,[...c]),E(he,[...l]),E(De,[...x]),E(Le,[...l,...x]),E(Re,[...l]),E(Ne,[...x]),E(ye,[...l,...x]),E(be,[...x]),E(Se,[...l,...x]),E(_e,[...l,...x]);return}On.forEach(c=>{E(c,[{...a}])})})},os=(e,t)=>t!=="null"&&t.length>0&&!_t.test(t)?{[e]:t}:{},Ka=(e,t,n)=>({[e]:{...Lo,notation:{...os("prefix",t),...os("postfix",n)}}}),to=(e,t,n,o)=>{let r=n+"Prefix",i=n+"Postfix";if(e[t][r]!==void 0&&e[t][i]!==void 0)return Ka(o[t],e[t][r],e[t][i])},Fa=(e,t)=>{let n={},o={},r={1:{styleName:"okNotationTextStyle",target:[o,n]},2:{styleName:"warningNotationTextStyle",target:[o]},4:{styleName:"errorNotationTextStyle",target:[o]}};return Object.entries(r).forEach(([i,s])=>{t&Number(i)&&e[s.styleName]&&s.target.forEach(a=>{a[i]={color:K(e[s.styleName].color,e[s.styleName].colorOpacity,"#333333",.7)}})}),{[q]:{override:Object.keys(o).length>0?o:void 0},[z]:{override:Object.keys(n).length>0?n:void 0}}},Ma=(e,t,n,o,r)=>{let i={workspace:{},editor:{},all:{},layout:{[q]:{},[z]:{}}};e.leftMargin&&(t.leftMargin=e.leftMargin),n.forEach(c=>{let l={color:ft(e[c].color),colorOpacity:e[c].colorOpacity,backgroundColor:ft(e[c].backgroundColor),backgroundOpacity:e[c].backgroundOpacity,fontStyle:ft(e[c].fontStyle),fontWeight:ft(e[c].fontWeight)};t.diagnosticDecorationOption[c]=pt(l,!0),i.workspace={...i.workspace,...to(e,c,"workspace",ho)},i.editor={...i.editor,...to(e,c,"editor",Oo)},i.all={...i.all,...to(e,c,"all",Do)}});let s=r.workspace|r.editor,a=o.overrideLayoutPlaceholderColorToHighestSeverity?Fa(e,s):void 0;return{...i,layout:{[q]:{},[z]:{},...a}}},rs=(e=!1,t=!1)=>{let n=7;return n^=e?1:0,n^=t?2:0,n},Ga=e=>{let t=7,n=7;return e.DiagnosticKind==="workspace Only"&&(n=0,t&=rs(e.hideOk,e.hideWarning)),e.DiagnosticKind==="editor Only"&&(t=0,n&=rs(e.hideOk,e.hideWarning)),{workspace:t,editor:n}},Ua=(()=>{let e=[...yo];return e.reverse().push(["0","0"]),e})(),Xa=e=>[...en(e,Ua,0,4).filter(t=>t!==0).flat(),"diagnosticPlaceholderTextStyle"],ja=(e,t)=>{e[fe]=t.openningBracket,e[pe]=t.closingBracket,e[Te]=t.lineEqual,e[me]=t.lineUp,e[Ee]=t.lineDown},is={initalCursor:{default:Ir,auto:vr},lastCursor:{default:kr,auto:Wr}},Ya=(e,t)=>{let n=t.overlayCursorPosition==="initial cursor"?is.initalCursor:is.lastCursor;switch(t.placeTextOnPreviousOrNextLine){case"previousLine":e.rangeFunction=n.default(-1);break;case"previousLine (auto-inline)":e.rangeFunction=n.auto(-1);break;case"nextLine":e.rangeFunction=n.default(1);break;case"nextLine (auto-inline)":e.rangeFunction=n.auto(1);break;default:yr(t.autoInlineDatumPoint),e.rangeFunction=wt;break}},Ve=async(e,t=!1)=>{let n={...go},o={..._o},r={layout:{},editor:{},workspace:{},all:{}},i=zr(),s={functionOf:i.functionOf,textOf:{}};t&&Ur(),mt(n,e+"."+_.diagnosticText,bo,s,jr);let a=n.visibility.overrideAllOk?B:re,c=Ga(n.visibility),l=Xa(c.workspace|c.editor);return Object.assign(r,Ma(n,o,l,n.visibility,c)),Object.assign(i.configOf,n.visibility),Ha(r,i.textOf.contentText,s.textOf,o,n.leftMargin),Pa(i.textOf.contentText,n.diagnosticPlaceholderTextStyle,n.leftMargin),ja(i.textOf.glyphList,n.glyphList),Ya(i.functionOf,n.visibility),Pr(a),Yr(a),Gr(),delete s.textof,delete s.functionOf,delete i.visibilityOf,delete i.functionOf,delete i.textOf.contentText,delete i.textOf.glyphList,delete i.textof,delete i.configOf,!0};var no={...uo},ss=e=>{let t=e?.extension.packageJSON.name;if(!t||(no.name=t,!no.name))return;let n=no,o=Ui().stateOf;if(n.configError||(n.configError=[],ns(n)),ji(),es(n))return n.generalConfigInfo.selectionTextEnabled&&Ye(n.name),n.generalConfigInfo.diagnosticTextEnabled&&Ve(n.name),{config:n,decoration:o}};var $e=h(require("vscode"));var F=h(require("vscode"));var cs=h(require("path"));var as=require("node:fs/promises");var ls=e=>t=>{if(t==="Yes"){for(let n of Object.values(_)){let o=N(e.package.extension.packageJSON.name+"."+n);for(let r of Object.keys(o))typeof o[r]!="function"&&r.length>0&&o.update(r,void 0,!0)}F.window.showInformationMessage("Configuration has been restored to default.")}},us=()=>ps("Are you sure to restore to default?"),ds=async(e,t)=>{try{let n=e.asAbsolutePath(cs.default.join("resource/preset/",t)),o=await(0,as.readFile)(n,{encoding:"utf-8"});return JSON.parse(o)}catch(n){console.error("Failed to load preset JSON:",n)}},$a=(e,t,n)=>o=>{if(o==="Yes")return fs(e,t,n)},xs=(e,t)=>{let n=N(e);for(let o of Object.keys(t))if(n.inspect(o)?.globalValue)return!0;return!1},fs=async(e,t,n)=>{e.updateCaller=lo,F.commands.executeCommand("workbench.view.explorer");let o=N(t),r=Object.keys(n),i=r.length;for(;i--;)if(typeof n[r[i]]=="object"){let s=o.inspect(r[i]);await o.update(r[i],{...s?.globalValue,...n[r[i]]},!0)}else await o.update(r[i],n[r[i]],!0);$(),Et(e),W(e,u),W(e,f),W(e,d),W(e,p),Ye(t,!0),Ve(t,!0),Xe(e),e.updateCaller=void 0},ps=e=>F.window.showWarningMessage(e,"Yes","No"),nn=async(e,{presetList:t,fileList:n,placeHolder:o})=>{let r=await F.window.showQuickPick(t.map(i=>({label:i})),{placeHolder:o});if(r&&Object.hasOwn(n,r.label.toString())){let i=e.package.extension.packageJSON.name,s=await ds(e.package,n[r.label.toString()]),a=$a(e.configInfo,i,s||{});xs(e.package.extension.packageJSON.name,s)?await ps("Configuration will be overwritten. Proceed?").then(a):await a("Yes")}},za={presetList:["Detailed","Simple","No Glpyph - Detailed","No Glpyph - Simple","Emoji - Detailed","Emoji - Simple"],fileList:{Detailed:"detailed.json",Simple:"simple.json","No Glpyph - Detailed":"no-glyph-detailed.json","No Glpyph - Simple":"no-glyph-simple.json","Emoji - Detailed":"emoji-detailed.json","Emoji - Simple":"emoji-simple.json"},placeHolder:" ... Select the Preset"},qa={presetList:["Horizontal","Vertical"],fileList:{Horizontal:"orientation-horizontal.json",Vertical:"orientation-vertical.json"},placeHolder:" ... Select the Preset Orientation"},Ja={presetList:["Light","Dark"],fileList:{Light:"color-light-theme.json",Dark:"color-dark-theme.json"},placeHolder:" ... Select the Color Contrast"},Za={presetList:["Dim","Bright"],fileList:{Dim:"contrast-dim.json",Bright:"contrast-bright.json"},placeHolder:" ... Select the Theme Color"},Ts=e=>nn(e,za),ms=e=>nn(e,qa),Es=e=>nn(e,Ja),Cs=e=>nn(e,Za),gs=async e=>{if(F.window.activeColorTheme.kind===F.ColorThemeKind.Light){let t=e.package.extension.packageJSON.name,n=await ds(e.package,"color-light-theme.json");n&&!xs(e.package.extension.packageJSON.name,n)&&await fs(e.configInfo,t,n)}};var Os=e=>$e.commands.registerCommand("cursorlinehighlight.applyPreset",()=>Ts(e)),hs=e=>$e.commands.registerCommand("cursorlinehighlight.setColor",()=>Es(e)),Ds=e=>$e.commands.registerCommand("cursorlinehighlight.setContrast",()=>Cs(e)),Ls=e=>$e.commands.registerCommand("cursorlinehighlight.setOrientation",()=>ms(e)),Rs=e=>$e.commands.registerCommand("cursorlinehighlight.restoreToDefaultConfiguration",()=>us().then(ls(e)));var M=h(require("vscode"));var Ns=({decorationState:e})=>M.window.onDidChangeWindowState(n=>{n.focused?M.window.activeTextEditor&&(qt(M.window.activeTextEditor),e.appliedHighlight[0]=je(M.window.activeTextEditor,[u])):$(),!n.focused&&!n.active&&($(),console.log("idling"))}),ys=({configInfo:e,decorationState:t})=>M.window.onDidChangeActiveTextEditor(n=>{n&&(D.check()&&D.notify(1500),$(),Fi(n),We(n),e.generalConfigInfo.diagnosticTextEnabled&&(Dn(),Ln(),t.eventTrigger[0]=Ce),qt(n),t.appliedHighlight[0]=je(n,[u]))}),bs=()=>M.window.onDidChangeTextEditorOptions(e=>{e.textEditor&&qt(e.textEditor)}),Ss=({decorationState:e})=>M.window.onDidChangeTextEditorSelection(t=>{t.selections&&(e.eventTrigger[0]=ao,e.appliedHighlight[0]=je(M.window.activeTextEditor,e.appliedHighlight))});var Is=h(require("vscode"));var _s=(e,t)=>{try{D.configurationUpdated();let n={general:()=>Et(e),cursorOnly:()=>W(e,u),singleLine:()=>W(e,f),multiLine:()=>W(e,d),multiCursor:()=>W(e,p),selectionText:()=>{e.generalConfigInfo.selectionTextEnabled&&Ye(e.name,!0)},diagnosticText:()=>{e.generalConfigInfo.diagnosticTextEnabled&&Ve(e.name,!0)}};$(),n.general(),n[t]()}catch(n){console.log("confugration update failed. Will notify user.",n)}finally{Xe(e)}};var vs=({configInfo:e,decorationState:t})=>Is.workspace.onDidChangeConfiguration(n=>{if(n&&e.updateCaller===void 0){let o=Object.keys(_).find(r=>n.affectsConfiguration(e.name+"."+r));o&&_s(e,o)}});var on=h(require("vscode"));var ks=({configInfo:e,decorationState:t})=>on.languages.onDidChangeDiagnostics(async n=>{let o=on.window.activeTextEditor;o&&n&&e.generalConfigInfo.diagnosticTextEnabled&&(t.eventTrigger[0]=Ce,nt(t)(o))});var As=async e=>{try{await e.extension.activate(),D.setPackageName(e.extension.packageJSON.name);let t=await ss(e);if(!t){console.error("Failed to initialize config.");return}let n=t.config,o=Ws.window.activeTextEditor;Xe(n),o&&(We(o),Gi(t.decoration),t.decoration.appliedHighlight[0]=je(o,[u]));let r={package:e,configInfo:n},i={configInfo:n,decorationState:t.decoration};return gs(r),[Os(r),hs(r),Ds(r),Ls(r),Rs(r),Ns(i),ys(i),Ss(i),bs(),ks(i),vs(i)]}catch(t){console.error("Error during extension initialization: ",t)}};function ol(e){As(e).then(t=>{t&&e.subscriptions.push(...t)})}function rl(){}0&&(module.exports={activate,deactivate});
