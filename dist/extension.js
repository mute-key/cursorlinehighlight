"use strict";var ye=Object.create;var D=Object.defineProperty;var Ce=Object.getOwnPropertyDescriptor;var Le=Object.getOwnPropertyNames;var Ee=Object.getPrototypeOf,Oe=Object.prototype.hasOwnProperty;var Re=(e,o)=>{for(var t in o)D(e,t,{get:o[t],enumerable:!0})},P=(e,o,t,n)=>{if(o&&typeof o=="object"||typeof o=="function")for(let i of Le(o))!Oe.call(e,i)&&i!==t&&D(e,i,{get:()=>o[i],enumerable:!(n=Ce(o,i))||n.enumerable});return e};var y=(e,o,t)=>(t=e!=null?ye(Ee(e)):{},P(o||!e||!e.__esModule?D(t,"default",{value:e,enumerable:!0}):t,e)),me=e=>P(D({},"__esModule",{value:!0}),e);var Qe={};Re(Qe,{activate:()=>Ye,deactivate:()=>qe});module.exports=me(Qe);var W=y(require("vscode"));var d=y(require("vscode"));var O=y(require("vscode")),G=(e,o)=>{let t=O.window.showInformationMessage(e);setTimeout(()=>{t?.then(()=>{})},o)},v=e=>{O.window.showErrorMessage("Invalid Value(s) in Configuration.","Fix Configuration","Ignore").then(o=>{o==="Fix Configuration"&&O.commands.executeCommand("workbench.action.openSettings",e.join(" "))})},u={indentAndEOLRegex:e=>new RegExp(`^( {${e}}|[\r
]+)*$`,"gm"),tagtAndEOLRegex:/(\t|[\r\n]+)*$/gm,isValidHexColor:/^#[A-Fa-f0-9]{6}$/,isValidWidth:/^[0-9]px$|^[0-9]em$/},H=(e,o,t,n)=>{let i=n||4,r=[];for(;i--;)e>>i&1?r.push(o):r.push(t);return r},I=e=>{let o=2166136261;for(let t=0;t<e.length;t++)o^=e.charCodeAt(t),o+=(o<<1)+(o<<4)+(o<<7)+(o<<8)+(o<<24),o=o>>>0;return o.toString(16)},k=e=>e.charAt(0).toUpperCase()+e.slice(1),R=(e,o=.6,t,n)=>{e=e.replace(/^#/,""),e.length===3&&(e=e.split("").map(f=>f+f).join("")),/^[0-9A-Fa-f]{6}$/.test(e)||(e=t.replace(/^#/,""),o=n);let r=parseInt(e.substring(0,2),16),s=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16);return`rgba(${r}, ${s}, ${a}, ${o})`};var A={name:void 0,config:void 0,configHashKey:void 0,status:{position:void 0,indent:{size:void 0,type:void 0}},borderPositionInfo:{CURSOR_ONLY:void 0,SINGLE_LINE:void 0,MULTI_LINE:void 0,MULTI_CURSOR:void 0},generalConfigInfo:{borderOpacity:void 0,backgroundOpacity:void 0,statusTextEnabled:void 0,statusTextColor:void 0,statusTextOpacity:void 0,statusTextBackgroundColor:void 0},configError:void 0},z={status:{decorationType:void 0},decorationList:{CURSOR_ONLY:void 0,SINGLE_LINE:void 0,MULTI_LINE:void 0,MULTI_CURSOR:void 0},appliedDecoration:{applied:void 0,editorDecoration:void 0}},U={none:[0],bottom:[2,0],"top-bottom":[10],"top-right-bottom-left":[15,0],left:[1]},he={none:[0,0,0],"top-bottom":[8,2,0],left:[1,1,1]},S={CURSOR_ONLY:U,SINGLE_LINE:U,MULTI_LINE:he,MULTI_CURSOR:U},c={RESET:{KEY:"RESET",MASK:15},CURSOR_ONLY:{KEY:"CURSOR_ONLY",MASK:1},SINGLE_LINE:{KEY:"SINGLE_LINE",MASK:2},MULTI_LINE:{KEY:"MULTI_LINE",MASK:4},MULTI_CURSOR:{KEY:"MULTI_CURSOR",MASK:8}},j={CURSOR_ONLY:"cursorOnly",SINGLE_LINE:"singleLine",MULTI_LINE:"multiLine",MULTI_CURSOR:"multiCursor"},m={borderOpacity:1,backgroundOpacity:.5,statusTextEnabled:!0,statusTextColor:"#FF0000",statusTextOpacity:1,statusTextBackgroundColor:null},X={CURSOR_ONLY:{isWholeLine:!0,borderWidth:"2px",borderStyle:"dotted",borderColor:"#ff0000",borderPosition:"bottom",backgroundColor:"#ff0000"},SINGLE_LINE:{isWholeLine:!1,borderWidth:"2px",borderStyle:"dotted",borderColor:"#ff0000",borderPosition:"bottom",backgroundColor:"#ff0000"},MULTI_LINE:{isWholeLine:!0,borderWidth:"2px",borderStyle:"dotted",borderColor:"#ff0000",borderPosition:"bottom",backgroundColor:"#ff0000"},MULTI_CURSOR:{isWholeLine:!1,borderWidth:"2px",borderStyle:"dotted",borderColor:"#ff0000",borderPosition:"bottom",backgroundColor:"#ff0000"}};var te=y(require("vscode"));var g=y(require("vscode"));var N=(e,o)=>{e.status.indent.size=Number(o.options.tabSize??o.options.indentSize??4),e.status.indent.type=o.options.insertSpaces?`
`:"	",e.status.indent.regex=o.options.insertSpaces?u.indentAndEOLRegex(e.status.indent.size):u.tagtAndEOLRegex},V=e=>{if(e.selections.length===1)return e.selections[0].isEmpty?c.CURSOR_ONLY:e.selections[0].isSingleLine?c.SINGLE_LINE:c.MULTI_LINE;if(e.selections.length>1)return c.MULTI_CURSOR},C=(e,o,t,n)=>new g.Range(new g.Position(e,o),new g.Position(t,n)),p=(e,o)=>new g.Range(e,o),K=(e,o,t)=>new g.Range(new g.Position(e,o),t);var J=e=>{let{editor:o,borderConfig:t,textEditorDecoration:n}=e;return t.isWholeLine?[{decoration:n[0],range:[p(o.selection.active,o.selection.active)]}]:t.beforeCursor?[{decoration:n[0],range:[C(o.selection.active.line,0,o.selection.active.line,o.selection.active.character)]}]:t.afterCursor?[{decoration:n[0],range:[K(o.selection.active.line,o.selection.active.character,o.document.lineAt(o.selection.active.line).range.end)]},{decoration:n[1],range:[C(o.selection.active.line,0,o.selection.active.line,o.selection.active.character)]}]:[]},Y=({editor:e,borderConfig:o,textEditorDecoration:t})=>[{decoration:t[0],range:[p(e.selection.start,e.selection.end)]}],q=({editor:e,borderConfig:o,textEditorDecoration:t})=>{if(o.borderPosition==="left")return[{decoration:t[2],range:[C(e.selection.start.line,e.selection.start.character,e.selection.end.line,e.selection.end.character)]}];{let n=[];return n.push({decoration:t[0],range:[p(e.selection.start,e.selection.start)]},{decoration:t[1],range:[p(e.selection.end,e.selection.end)]}),Math.abs(e.selection.start.line-e.selection.end.line)>1?n.push({decoration:t[2],range:[C(e.selection.start.line+1,e.selection.start.character,e.selection.end.line-1,e.selection.end.character)]}):l(e,t[2],[]),n}},Q=({editor:e,borderConfig:o,textEditorDecoration:t})=>[{decoration:t[0],range:e.selections.reduce((n,i)=>(n.push(p(i.start,i.active)),n),[])},{decoration:t[1],range:e.selections.reduce((n,i)=>(n.push(C(i.active.line,0,i.active.line,i.active.character)),n),[])}];var ee=y(require("vscode"));var h={CURSOR_ONLY:{contentText:e=>`< Editing ... At (Col ${e})`},SINGLE_LINE:{contentText:e=>`< Selection ... Of (${e} Characters)`},MULTI_LINE:{contentText:(e,o,t)=>`< Selection ${t} ... Of (${e} Lines, ${o} Characters, Indent/EOL Ignored)`},MULTI_CURSOR:{contentText:(e,o,t,n)=>`< Multi Selection ... Of (${e} of ${o}, with Total ${t} Lines ${n} Characters )`}},De=(e,o)=>[{contentText:h[o.KEY].contentText(e.selection.active.character),range:p(e.selection.active,e.selection.active),isWholeLine:!0}],ve=(e,o)=>[{contentText:h[o.KEY].contentText(Math.abs(e.selection.end.character-e.selection.start.character)),range:p(e.selection.active,e.selection.active),isWholeLine:!0}],Se=(e,o,t)=>{let i=e.document.getText(e.selection).replace(o.indent.regex,"").length,r=Math.abs(e.selection.end.line-e.selection.start.line)+1;return[{contentText:h[t.KEY].contentText(r,i,"Anchor"),range:p(e.selection.anchor,e.selection.anchor),isWholeLine:!0},{contentText:h[t.KEY].contentText(r,i,"Cursor"),range:p(e.selection.active,e.selection.active),isWholeLine:!0}]},xe=(e,o,t)=>{let n=e.selections.length,i=0,r=0,s=0,a=e.selections[0].start.line===e.selections[0].end.line,f=0,M=[],F=[];for(f=a?1:Math.abs(e.selections[0].end.line-e.selections[0].start.line)+1;i<n;){if(a)r=r+(e.selections[i].end.character-e.selections[i].start.character),s=s+f;else{let B=e.document.getText(e.selections[i]);r=r+B.replace(o.indent.regex,"").length,s=s+f}i++}for(i=n;i--;)new Set(F).has(e.selections[i].end.line)||(M.push({contentText:h[t.KEY].contentText(i+1,n,s,r),range:p(e.selections[i].start,e.selections[i].end),isWholeLine:!0}),F.push(e.selections[i].end.line),i++);return M},be=(e,o,t)=>({CURSOR_ONLY:()=>De(e,t),SINGLE_LINE:()=>ve(e,t),MULTI_LINE:()=>Se(e,o,t),MULTI_CURSOR:()=>xe(e,o,t)}),Ie=(e,o)=>{let t=o.statusTextColor,n=o.statusTextOpacity,i=m.statusTextColor,r=m.statusTextOpacity;return{isWholeLine:e.isWholeLine,rangeBehavior:ee.DecorationRangeBehavior.ClosedClosed,after:{contentText:e.contentText,color:R(t,n,i,r),backgroundColor:o.statusTextBackgroundColor,fontWeight:"light",fontStyle:"italic",textDecoration:"none",margin:"0 0 0 20px"}}},Z=(e,o,t)=>{let n=[],i=o.length;for(;i--;){let r=x(Ie(o[i],t));l(e,r,[o[i].range]),n.push(r)}return n},Ue=e=>{let o=e.decorationType.length;for(;o--;)e.decorationType[o].dispose(),delete e.decorationType[o]},oe=(e,o,t,n)=>{let i=be(e,o,n)[n.KEY]();o.decorationType&&Ue(o),o.decorationType=Z(e,i,t)};var l=(e,o,t)=>e.setDecorations(o,t),x=e=>te.window.createTextEditorDecorationType(e),ne=e=>e.forEach(o=>{o.dispose()}),Ne=(e,o)=>o.forEach(t=>l(e,t,[])),_e=(e,o,t)=>n=>o?(e.status?.decorationType?.forEach(i=>{i.dispose()}),e.decorationList[n.KEY]?.forEach(i=>{Array.isArray(i)?i.forEach(r=>{l(o,r,[])}):l(o,i,[])}),!0):!1,we=(e,o)=>Object.values(c).filter(t=>e.MASK&t.MASK).map(t=>o(t)).every(Boolean),ie=(e,o,t)=>we(c.RESET,n=>_e(e,o,t)(n)),_=(e,o,t)=>o.appliedDecoration.applied?o.appliedDecoration.applied.MASK!==t.MASK?(Ne(e,o.decorationList[o.appliedDecoration.applied.KEY]),o.appliedDecoration.applied=t,!0):!1:(o.appliedDecoration.applied=t,!0),We=({loadConfig:e,editor:o,decorationInfo:t,decorationStatus:n})=>{let i=n.decorationList[t.KEY];if(i){let r=e.borderPositionInfo[t.KEY];e.generalConfigInfo.statusTextEnabled&&oe(o,e.status,e.generalConfigInfo,t);let s={editor:o,borderConfig:r,textEditorDecoration:i};return{CURSOR_ONLY:()=>J(s),SINGLE_LINE:()=>Y(s),MULTI_LINE:()=>q(s),MULTI_CURSOR:()=>Q(s)}[t.KEY]()}},L=({editor:e,decorationInfo:o,loadConfig:t,decorationStatus:n})=>{let i=n.decorationList[o.KEY];if(i){n.appliedDecoration.editorDecoration=i;let r=We({editor:e,decorationInfo:o,loadConfig:t,decorationStatus:n});if(!r)return;_(e,n,o),r.forEach(({decoration:s,range:a})=>{l(e,s,a)})}};var ae=e=>Object.entries(e.config).reduce((o,[t,n])=>((typeof n=="string"||typeof n=="number"||typeof n=="boolean")&&o.push(n),o),[]).join(""),Me=e=>{let o=ae(e);return I(o)},Fe=e=>{e.configHashKey=I(ae(e))},Be=e=>{let o=Me(e);return e.configHashKey===o?!1:(e.configError=[],e.config=d.workspace.getConfiguration(e.name),e.configHashKey=o,e.configError.length===0&&G("Config has been changed. Reloading configuration. (Messaage Dismiss in 2 second.)",1500),!0)},Pe=(e,o)=>{let t=d.workspace.getConfiguration("editor");o===null||o==="null"||String(o).length===0?t.update(e,null,d.ConfigurationTarget.Global):t.update(e,o,d.ConfigurationTarget.Global)},Ge=e=>{let o=d.workspace.getConfiguration("editor");o.update("renderLineHighlight","gutter",d.ConfigurationTarget.Global),o.update("roundedSelection",!1,d.ConfigurationTarget.Global),o.update("cursorBlinking","phase",d.ConfigurationTarget.Global);let t=o.get("tabSize"),n=o.get("insertSpaces");e.status.indent.size=Number(t||4),e.status.indent.type=n?`
`:"	",e.status.indent.regex=n?u.indentAndEOLRegex(e.status.indent.size):u.tagtAndEOLRegex},E={...A},w={...z},b=e=>{let o=e.extension.packageJSON.name;if(!o||(E.name=o,E.config=d.workspace.getConfiguration(E.name),!E.name&&!E.config))return;let t=E;if(t.configError||(t.configError=[]),!t.configHashKey)Fe(t),Ge(t);else if(!Be(t))return{config:t,decoration:w};if(Je(t,w))return{config:t,decoration:w}},He=(e,o)=>e,ke=(e,o)=>o.reduce((t,n)=>n(t),e),re=e=>u.isValidHexColor.test(e),$e=e=>u.isValidWidth.test(e),Ae=(e,o,t,n,i)=>{let r=o+t,s=e.name+"."+r;if(r.toLocaleLowerCase().includes("bordercolor")){if(!re(String(n)))return e.configError.push(s),i}else if(r.toLocaleLowerCase().includes("backgroundcolor")){if(n===null||n==="null"||String(n).length===0)return Pe(s,null),null;if(!re(String(n)))return e.configError.push(s),i}else if(r.toLocaleLowerCase().includes("borderwidth")&&!$e(String(n)))return e.configError.push(s),i;return n},ce=(e,o,t,n,i)=>{try{let r=t;i&&i.length&&(r=ke(t,i));let s=e.config.get(o+r,n);return s===void 0&&console.warn(`Config value for ${t} is undefined or caused an error. Using default value.`),Ae(e,o,r,s,n)}catch(r){return console.error(`Failed to get config value for ${o+t}:`,r),n}},se={borderColor:{of:"borderOpacity",fn:(e,o,t)=>R(e,o,t)},backgroundColor:{of:"backgroundOpacity",fn:(e,o,t)=>R(e,o,t)}},ze=(e,o)=>{let t=j[o],n=X[o];return Object.entries(n).reduce((i,[r,s])=>{let a=ce(e,t,He(r,n),s,[k]);if(a!=null)if(Object.hasOwn(se,r)){let f=se[r];i[r]=f.fn(a,e.generalConfigInfo[f.of],s)}else i[r]=a;return i},{})},je=(e,o)=>t=>{try{let n=t(e,o);if(!n||n.length===0)return;let i=n.reduce((r,s)=>{let a={...e};return a.borderWidth=s,r.push(a),r},[]).reduce((r,s)=>(r.push(x(s)),r),[]);return i.length===0?void 0:i}catch(n){console.log("creating decoration type thrown error:",o,n);return}},Xe=(e,o)=>{if(Object.hasOwn(S,o))return Object.hasOwn(S[o],e.borderPosition)?Ve(e,S[o][e.borderPosition]):void 0},Ve=(e,o)=>{let t=[];for(let n of o){let i=H(n,e.borderWidth,"0");t.push(i.join(" "))}return t},Ke=(e,o)=>{let t=o.replaceAll(" ","").split("|"),n=!1,i=!1,r=!1,s=!1,a=!1;return t.length>1&&(n=/isWholeLine/s.test(t[1]),i=/beforeCursor/s.test(t[1]),r=/afterCursor/s.test(t[1]),s=/atLineStart/s.test(t[1]),a=/selectionOnly/s.test(t[1]),e==="MULTI_LINE"&&t[0]==="left"&&(n=!0)),{isWholeLine:n,borderPosition:t[0],beforeCursor:i,afterCursor:r,atLineStart:s,selectionOnly:a}},Je=(e,o)=>{for(let t in e.generalConfigInfo)e.generalConfigInfo[t]=ce(e,"",t,m[t]);for(let t in o.decorationList){let n=t;o.decorationList[n]&&ne(o.decorationList[n]);let i=ze(e,n),r=Ke(n,i.borderPosition);e.borderPositionInfo[n]=r,i.borderPosition=r.borderPosition,i.isWholeLine=r.isWholeLine;let s=je(i,n)(Xe);if(!s)return!1;o.decorationList[n]=s}return!0};var T=y(require("vscode"));var de=(e,o)=>T.window.onDidChangeWindowState(t=>{t.focused?T.window.activeTextEditor&&L({loadConfig:e,editor:T.window.activeTextEditor,decorationInfo:c.CURSOR_ONLY,decorationStatus:o}):T.window.visibleTextEditors.forEach(n=>{ie(o,n,!0)})}),Te=(e,o)=>T.window.onDidChangeActiveTextEditor(t=>{t&&(e.configError.length>0&&v(e.configError),N(e,t),T.window.visibleTextEditors.forEach(n=>{o.appliedDecoration.editorDecoration!==void 0&&o.appliedDecoration.editorDecoration.forEach(i=>{l(n,i,[])})}),L({loadConfig:e,editor:t,decorationInfo:c.CURSOR_ONLY,decorationStatus:o}))}),le=e=>T.window.onDidChangeTextEditorOptions(o=>{N(e,o.textEditor)}),fe=(e,o)=>T.window.onDidChangeTextEditorSelection(t=>{if(t.selections){let n=V(t.textEditor);if(!n||(_(t.textEditor,o,n),!o.decorationList[n.KEY]))return;L({loadConfig:e,editor:t.textEditor,decorationInfo:n,decorationStatus:o})}}),ue=e=>T.workspace.onDidChangeConfiguration(o=>{if(o){let t=b(e)}});var ge=async e=>{try{await e.extension.activate();let o=b(e);if(!o){console.error("Failed to initialize config.");return}let t=o.config,n=o.decoration;if(!n.decorationList){console.error("Failed to initialize decorationList.");return}let i=W.window.activeTextEditor;return t.configError.length>0&&v(t.configError),i&&L({loadConfig:t,editor:i,decorationInfo:c.CURSOR_ONLY,decorationStatus:n}),[de(t,n),Te(t,n),fe(t,n),le(t),ue(e)]}catch(o){console.error("Error during extension activation: ",o),W.window.showErrorMessage("Extension activation failed!",o)}};function Ye(e){ge(e).then(o=>{o&&e.subscriptions.push(...o)})}function qe(){}0&&(module.exports={activate,deactivate});
