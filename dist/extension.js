"use strict";var Gs=Object.create;var Ct=Object.defineProperty;var Us=Object.getOwnPropertyDescriptor;var Xs=Object.getOwnPropertyNames;var js=Object.getPrototypeOf,Ys=Object.prototype.hasOwnProperty;var Vs=(e,t)=>{for(var n in t)Ct(e,n,{get:t[n],enumerable:!0})},ro=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Xs(t))!Ys.call(e,r)&&r!==n&&Ct(e,r,{get:()=>t[r],enumerable:!(o=Us(t,r))||o.enumerable});return e};var h=(e,t,n)=>(n=e!=null?Gs(js(e)):{},ro(t||!e||!e.__esModule?Ct(n,"default",{value:e,enumerable:!0}):n,e)),$s=e=>ro(Ct({},"__esModule",{value:!0}),e);var $a={};Vs($a,{activate:()=>Ya,deactivate:()=>Va});module.exports=$s($a);var oo=h(require("vscode"));var Qe=h(require("vscode"));var Je=256,u=257,f=258,d=259,p=260;var C=513,O=514,S=515,w=516,_=517,T=518,E=519;var io=544,so=545,co=546;var ao=560,lo=561,uo=562,xo=563,fo=564,po=565,To=566;var cn=769,an=770,ln=771;var q=777,J=778,Ze=776,Z=779,Q=780,ee=781,te=782,ne=783,oe=784;var Ot=790,ht=791,Dt=792;var fe=793,pe=794,Te=795,Ee=796,me=797,Lt=1560,Rt=1562,Nt=2350,bt=2348,yt=2352,St=2350;var Eo=4097,ge=4098,mo=4099;var go=4353;var I={general:"general",cursorOnly:"cursorOnly",singleLine:"singleLine",multiLine:"multiLine",multiCursor:"multiCursor",selectionText:"selectionText",diagnosticText:"diagnosticText"},Co={name:void 0,renderLimiter:void 0,updateCaller:void 0,generalConfigInfo:{borderOpacity:void 0,backgroundOpacity:void 0,selectionTextEnabled:void 0,diagnosticTextEnabled:void 0},configError:void 0},Oo={selectionTextEnabled:["selectionText","enabled"],diagnosticTextEnabled:["diagnosticText","enabled"]},ho={cursorOnlyText:C,singleLineText:O,multiLineCursorText:w,multiLineAnchorText:_,multiCursorText:T,multiCursorEdit:E},Do={enabled:void 0,color:void 0,colorOpacity:void 0,backgroundColor:void 0,backgroundOpacity:void 0,fontStyle:void 0,fontWeight:void 0,leftMargin:void 0,cursorOnlyText:void 0,singleLineText:void 0,multiLineCursorText:void 0,multiLineAnchorText:void 0,multiCursorText:void 0,multiCursorEdit:void 0,selectionCountTextStyle:{ln:void 0,col:void 0,zCol:void 0,char:void 0,charOnly:void 0,lc:void 0,nth:void 0,count:void 0,opacity:void 0,fontStyle:void 0,fontWeight:void 0}},Lo={[u]:"cursorOnly",[f]:"singleLine",[d]:"multiLine",[p]:"multiCursor"},Ro=["cursorOnlyText","singleLineText","multiLineCursorText","multiLineAnchorText","multiCursorText","multiCursorEdit"],No={leftMargin:void 0,placeholderDecorationOption:{},selectionDecorationOption:{ln:void 0,col:void 0,zCol:void 0,char:void 0,charOnly:void 0,lc:void 0,nth:void 0,count:void 0}},Ce={isWholeLine:void 0,rangeBehavior:void 0,after:{}},bo={contentText:void 0,color:void 0,backgroundColor:void 0,fontWeight:void 0,fontStyle:void 0,textDecoration:void 0,margin:void 0},sl={[Je]:{KEY:Je,MASK:15},[u]:{KEY:u,MASK:1},[f]:{KEY:f,MASK:2},[d]:{KEY:d,MASK:4},[p]:{KEY:p,MASK:8}},dn={DiagnosticKind:void 0,placeTextOnPreviousOrNextLine:void 0,overlayCursorPosition:void 0,overrideLayoutPlaceholderColorToHighestSeverity:void 0,overrideAllOk:void 0,autoInlineDatumPoint:void 0},Zs={openningBracket:void 0,closingBracket:void 0,lineEqual:void 0,lineUp:void 0,lineDown:void 0},yo={enabled:void 0,leftMargin:void 0,visibility:dn,glyphList:Zs,problemPlaceholderContentText:void 0,allOkPlaceholderContentText:void 0,allOkContentText:void 0,diagnosticPlaceholderTextStyle:void 0,okNotationTextStyle:void 0,okTextStyle:void 0,okWorkspaceContentText:void 0,okEditorContentText:void 0,warningNotationTextStyle:void 0,warningTextStyle:void 0,warningWorkspaceContentText:void 0,warningEditorContentText:void 0,errorNotationTextStyle:void 0,errorTextStyle:void 0,errorWorkspaceContentText:void 0,errorEditorContentText:void 0},So={okNotationTextStyle:Z,warningNotationTextStyle:Q,errorNotationTextStyle:ee},_o={okNotationTextStyle:te,warningNotationTextStyle:ne,errorNotationTextStyle:oe},Io={okNotationTextStyle:Ze},vo={contentText:void 0,notation:void 0},ko={allOkPlaceholderContentText:["diagnosticPlaceholderTextStyle",void 0],allOkContentText:["okTextStyle","okNotationTextStyle"],problemPlaceholderContentText:["diagnosticPlaceholderTextStyle",void 0],okEditorContentText:["okTextStyle","okNotationTextStyle"],warningEditorContentText:["warningTextStyle","warningNotationTextStyle"],errorEditorContentText:["errorTextStyle","errorNotationTextStyle"],okWorkspaceContentText:["okTextStyle","okNotationTextStyle"],warningWorkspaceContentText:["warningTextStyle","warningNotationTextStyle"],errorWorkspaceContentText:["errorTextStyle","errorNotationTextStyle"]},Wo={problemPlaceholderContentText:J,allOkPlaceholderContentText:q,allOkContentText:Ze,okEditorContentText:Z,warningEditorContentText:Q,errorEditorContentText:ee,okWorkspaceContentText:te,warningWorkspaceContentText:ne,errorWorkspaceContentText:oe},Ao=[["okNotationTextStyle","okTextStyle"],["warningNotationTextStyle","warningTextStyle"],["errorNotationTextStyle","errorTextStyle"]],wo=["problemPlaceholderContentText","allOkPlaceholderContentText","okWorkspaceContentText","okEditorContentText","allOkContentText","warningWorkspaceContentText","warningEditorContentText","errorWorkspaceContentText","errorEditorContentText"],Po={[Qe.DiagnosticSeverity.Warning]:"warning",[Qe.DiagnosticSeverity.Error]:"error",[Qe.DiagnosticSeverity.Information]:void 0,[Qe.DiagnosticSeverity.Hint]:void 0},Bo={leftMargin:void 0,diagnosticDecorationOption:{diagnosticPlaceholderTextStyle:void 0,okTextStyle:void 0,okNotationTextStyle:void 0,warningTextStyle:void 0,warningNotationTextStyle:void 0,errorTextStyle:void 0,errorNotationTextStyle:void 0}},un={none:[0],bottom:[2,0],"top-bottom":[10],"top-right-bottom-left":[15,0],left:[1]},Qs={none:[0,0,0],"top-bottom":[8,2,0],left:[1,1,1]},_t={[u]:un,[f]:un,[d]:Qs,[p]:un},Ho={isWholeLine:!1,borderWidth:"2px",borderStyle:"dotted",borderColor:"#ff0000",borderPosition:"bottom",backgroundColor:"#ff0000"},xn={borderOpacity:1,backgroundOpacity:.5,selectionTextEnabled:!1},cl={selectionTextColor:"#FF0000",selectionTextOpacity:1,selectionTextBackgroundColor:null,selectionTextFontStyle:"normal",selectionTextFontWeight:"bold"};var It=578,fn=577,pn=580,vt=579,Tn=581,et=583;var G=1,En=2884896,mn=2883872,U=2884608,kt=65,gn=17,Oe=33,X=129;var Wt=1,Cn=1,On=2;var Ko=5,Mo=1,Fo=12,Go=8,Uo=10,Xo=14,jo=18,Yo=2,Vo=20,$o=0,zo=1,qo=2,Jo=3,Zo=32,Qo=33;var H=37,re=38,he=42,De=50,Le=58,Re=74,Ne=82,be=90,ye=146,Se=154,_e=218;var er={size:void 0,type:void 0,regex:void 0},tr={appliedHighlight:[0],eventTrigger:[0],diagnosticSignature:[0],previousLine:[0]},ve=[u,f,d,p],nr={[Je]:[],[u]:[],[f]:[],[d]:[],[p]:[]},or={[u]:void 0,[f]:void 0,[d]:void 0,[p]:void 0},rr={override:0,severity:0,editor:{warning:{line:[],total:0},error:{line:[],total:0}},workspace:{warning:{source:0,total:0},error:{source:0,total:0}}},ir={[C]:void 0,[O]:void 0,[w]:void 0,[_]:void 0,[T]:void 0,[E]:void 0},sr={[H]:[],[re]:[],[he]:[],[De]:[],[Le]:[],[Re]:[],[Ne]:[],[be]:[],[ye]:[],[Se]:[],[_e]:[]},hn=[re,he,De,Le,Re,Ne,be,ye,Se,_e],cr={[fe]:void 0,[pe]:void 0,[Te]:void 0,[Ee]:void 0,[me]:void 0},Dn=[H,...hn],ll={[cn]:Z,[an]:Q,[ln]:ee},ul={[cn]:te,[an]:ne,[ln]:oe};var j=h(require("vscode"));var ke={diagnosticLineDelta:1,autoInlineDatumPoint:0,datumPointOfEditor:0},ar=e=>ke.autoInlineDatumPoint=e,We=e=>{let t=e.document.lineCount,n=[];for(;t--;)n.push(e.document.lineAt(t).range.end.character);ke.datumPointOfEditor=Math.ceil(Math.max(...n)*(ke.autoInlineDatumPoint/100))},lr=(e,t)=>{let n=e.document.lineAt(e.selection.end.line+t).range.end.character,o=e.document.lineAt(e.selection.end.line).range.end.character;return n>o&&n>ke.datumPointOfEditor},At=(e,t)=>e.selection.end.line+t===e.document.lineCount,ur=e=>e[e.length-1].end.line;var dr=(e,t)=>new j.Range(e,t);var wt=e=>{let t=new j.Position(e.selection.end.line,e.selection.end.character);return new j.Range(t,t)},xr=e=>t=>t.document.lineAt(t.selection.end.line+(At(t,e)?0:ke.diagnosticLineDelta)).range,fr=e=>t=>t.document.lineAt(t.selection.end.line+(At(t,e)||lr(t,e)?0:1)).range,pr=e=>t=>t.document.lineAt(ur(t.selections)+(At(t,e)?0:ke.diagnosticLineDelta)).range,Tr=e=>t=>t.document.lineAt(ur(t.selections)+(At(t,e)||lr(t,e)?0:1)).range,ie=e=>new j.Range(e,e),Er=e=>new j.Selection(e,e);var v=[];var jn=h(require("vscode"));var mr=/(\${pre})/s,gr=/(\${post})/s,Cr=/(\${src})/s,Or=/(\${wrn})/s,hr=/(\${err})/s,Dr=/(\${editor})/s,Lr=/(\${workspace})/s,Rr=/(\${allok})/s,Nr=/(\${col})/s,br=/(\${zCol})/s,yr=/(\${lc})/s;var Sr=/(\${ln})/s,_r=/(\${char})/s,Ir=/(\${charOnly})/s,vr=/(\${nth})/s,kr=/(\${count})/s,Wr=e=>new RegExp(`^( {${e}}|[\r
]+)*`,"gm"),Pt=/^[%\.].*[%\.]$/s,Ar=/(\t|[\r\n]+)*$/gm;var wr=/(\${[A-z]*})/g,Pr=/\${([^{}]+)}/s;var Gt=h(require("vscode"));var Bt=Symbol("prefix"),Ht=Symbol("postfix");var Mt=h(require("vscode"));var N={...rr},Ln=()=>{N.editor.warning.line.splice(0),N.editor.warning.total=0,N.editor.error.line.splice(0),N.editor.error.total=0},Rn=()=>{N.workspace.warning.source=0,N.workspace.warning.total=0,N.workspace.error.source=0,N.workspace.error.total=0},tc=(e,t,n,o=void 0)=>{Object.keys(t).forEach(r=>{n===o&&(e.editor[r].line=[...new Set([...e.editor[r].line,...t[r].map(i=>i.range.start.line)])],e.editor[r].total=0,e.editor[r].total=t[r].length),t[r].length>0&&(e.workspace[r].source+=1,e.workspace[r].total+=t[r].length)})},nc=(e,t,n)=>{for(let o of t)if(o.severity<=Mt.DiagnosticSeverity.Warning){typeof e[n.fsPath]!="object"&&(e[n.fsPath]={});let r=Po[o.severity];Array.isArray(e[n.fsPath][r])||(e[n.fsPath][r]=[]),e[n.fsPath][r].push(o)}},oc=e=>{let t=e.editor.error.total!==0||e.editor.warning.total!==0,n=e.workspace.error.total!==0||e.workspace.warning.total!==0;if(!t&&!n)return 1;let o=e.editor.warning.total<=e.editor.error.total&&t?4:2,r=e.workspace.warning.total<=e.workspace.error.total&&n?4:2;return Math.max(o,r)},rc=e=>[e.override,e.severity,[...e.editor.warning.line],e.editor.warning.total,[...e.editor.error.line],e.editor.error.total,e.workspace.warning.source,e.workspace.warning.total,e.workspace.error.source,e.workspace.error.total],Kt={},Hr=e=>{N.override=e},Kr=(e=void 0)=>{for(let n in Kt)delete Kt[n];Rn(),Ln();let t=Mt.languages.getDiagnostics();for(let[n,o]of t)nc(Kt,o,n);for(let[n,o]of Object.entries(Kt))tc(N,o,n,e?.fsPath);return N.severity=oc(N),rc(N)};var Pe={...sr},we={...cr},tt=[],m=(e,t)=>{t.forEach(n=>{typeof n.after.contentText=="number"&&Object.hasOwn(nt,n.after.contentText)&&(nt[n.after.contentText]=n.after,zr.push(n.after.contentText)),Pe[e].push([{get range(){return nt.rangeReference},renderOptions:n}])})},nt={rangeReference:void 0,[Lt]:void 0,[Rt]:void 0,[Nt]:void 0,[bt]:void 0,[yt]:void 0,[St]:void 0},Xr=()=>{let e=[];Dn.forEach(o=>{e.push([o,Pe[o].length])}),Nn.isWholeLine=!0,Nn.rangeBehavior=Gt.DecorationRangeBehavior.ClosedClosed;let t=Math.max(...e.map(o=>o[1])),n=t;for(tt?.forEach(o=>o.dispose()),tt?.splice(0);n--;)tt.push(Gt.window.createTextEditorDecorationType(Nn));e.forEach(o=>{let r=t-o[1];for(;r--;)Pe[o[0]].push([])})},jr=()=>{for(let e of Dn)Pe[e]=[]},ic={...dn},Mr=(e,t)=>{let n=[],o=e.length,r=!1,i=!1,s=!1;for(;o--;){if(e[o]>t&&!i)i=!0;else if(e[o]<t&&!r)r=!0;else if(e[o]===t&&!s){s=!0,i=!1,r=!1;break}if(i&&r)break}return n.push(we[fe],s?we[Te]:"",r?we[Ee]:"",i?we[me]:"",we[pe]),n.join("")},sc={allok:Ot},cc={editor:ht,workspace:Dt},se={pre:Bt,post:Ht},Yr={rangeFunction:wt,problemPlaceholderContentText:cc,allOkPlaceholderContentText:sc,allOkContentText:se,okWorkspaceContentText:se,okEditorContentText:se,warningEditorContentText:{...se,wrn:Lt},errorEditorContentText:{...se,err:Rt},errorWorkspaceContentText:{...se,src:yt,err:St},warningWorkspaceContentText:{...se,src:Nt,wrn:bt}},ac={allok:Rr},lc={editor:Dr,workspace:Lr},ce={pre:mr,post:gr},Fr={wrn:Or},Gr={src:Cr},Ur={err:hr},Vr={problemPlaceholderContentText:lc,allOkPlaceholderContentText:ac,allOkContentText:ce,okWorkspaceContentText:ce,okEditorContentText:ce,warningWorkspaceContentText:{...ce,...Gr,...Fr},warningEditorContentText:{...ce,...Fr},errorWorkspaceContentText:{...ce,...Gr,...Ur},errorEditorContentText:{...ce,...Ur}},Nn={...Ce},Ft=[0,0,[],0,[],0,0,0,0,0],$r=e=>{Ft[0]=e},uc=e=>{let t=(e[3]?2:0)|(e[5]?4:0),n=(e[7]?2:0)|(e[9]?4:0);return t===0&&n===0?e[0]:(t?t<<5:32)|(n?n<<2:4)|2},dc=e=>{let t=e.length;for(;t--;)Ft[t]=e[t]},xc={[Lt]:({state:e,line:t})=>String(e[3])+Mr(e[2],t),[Rt]:({state:e,line:t})=>String(e[5])+Mr(e[4],t),[Nt]:({state:e})=>String(e[6]),[bt]:({state:e})=>String(e[7]),[yt]:({state:e})=>String(e[8]),[St]:({state:e})=>String(e[9])},zr=[],fc=e=>t=>{nt[t].contentText=xc[t](e)},pc=e=>(t,n)=>{e(tt[n],t)},bn={line:0,state:Object.create(null)},ot=e=>t=>{e.eventTrigger[0]===ge&&dc(Kr(t.document.uri)),bn.line=t.selection.end.line,bn.state=Ft,zr.forEach(fc(bn)),nt.rangeReference=Yr.rangeFunction(t),Pe[uc(Ft)].forEach(pc(t.setDecorations))},qr=e=>{tt.forEach(ae(e))},Jr=()=>({functionOf:Yr,textOf:{contentText:Pe,glyphList:we},configOf:ic});var at=h(require("vscode"));var Tc=e=>Er(e.end),Ec=(e,t)=>e.end.line-t.end.line,mc=(e,t,n)=>t===0||n[t-1]<=e,gc=e=>e.isEmpty,Cc=e=>e.selections=[...e.selections].sort(Ec),Oc=e=>e.selections=e.selections.map(Tc),hc=e=>e.find(gc)!==void 0,Zr=e=>e.selections.every(mc)?(ei(e,Cc),!0):!1,Qr=e=>hc(e.selections)?(ei(e,Oc),!0):!1,ei=async(e,t)=>await t(e);var Dc=e=>t=>t+e[0],Be="contentText",yn="range",Lc={get contentText(){return this.indexList.map(Dc(this.baseIndex)).join(",")}},Rc=(e,t,n,o)=>e.map(r=>t(n,r,o)).join(", "),Nc={get contentText(){let{columnList:e,columnFunc:t,editor:n,detla:o}=this;return Rc(e,t,n,o)}},bc={get range(){return this.selectionBuffer[this.selectionBufferIndex]}},ti=Object.getOwnPropertyDescriptor(Lc,Be),ni=Object.getOwnPropertyDescriptor(Nc,Be),oi=Object.getOwnPropertyDescriptor(bc,yn),He=(e,t,n)=>{Object.defineProperty(e,t,n)},Sn=(e,t,n)=>{let o={...e};return o.after={...e.after,baseIndex:n.baseIndex,indexList:[t.cursorIndex]},He(o.after,Be,ti),n.baseIndex=o.after.baseIndex,n.indexList=o.after.indexList,Array.isArray(n.indexList)?t.overlay.indexListRefBuffer.push(...n.indexList):t.overlay.indexListRefBuffer.push(n.indexList),o},_n=(e,t,n)=>{let o={...e};return o.after={...e.after,editor:n.lineFn.editor,columnList:[t.selectionBuffer.length-1]},n.columnList=o.after.columnList,He(o.after,Be,ni),o},In=(e,t)=>{e.after.baseIndex=[0],e.after.indexList=[],t.baseIndex=e.after.baseIndex,t.indexList=e.after.indexList,He(e.after,Be,ti)},vn=(e,t,n=0,o)=>{e.after.delta=n,e.after.columnFunc=t,e.after.columnList=[],o.columnList=e.after.columnList,He(e.after,Be,ni)};var ci=(e,t)=>n=>{switch(n.sign&Cn){case Cn:return kn[n.sign](n.body,e,t);case 0:switch(n.sign&On){case On:let o=kn[n.sign];return o(n.body,e);case 0:let r=kn[n.sign];return r(n.body,t);default:return null}default:return null}},Y={sign:et,body:(e,t)=>{let n=e.calibration;for(;n--;)e.baseIndexRefBuffer[n][0]+=1}},Me={sign:Tn,body:(e,t)=>{e.baseIndexRefBuffer.push(t)}},Ke={sign:vt,body:(e=0,t)=>{t.push(e+1)}},ri={sign:vt,body:(e=0,t)=>{console.log(t),t.unshift(t[0]-1)}};var ai={sign:et,body:(e,t)=>{e.calibration++}},Wn={sign:pn,body:e=>{e.baseIndex=[0]}},An={sign:It,body:e=>{e.cursorIndex=0}},wn={sign:It,body:e=>{e.baseLine=e.currentLine}},ii={sign:fn,body:(e,t)=>{t.indexList=e.overlay.indexListRefBuffer[e.duplicateOverlayIndex]}},li={[Ko]:[Ke],[Mo]:[Y,Me,Ke],[Fo]:[Me,Ke],[Go]:[Ke],[Uo]:[Y,Ke],[Xo]:[Y,Ke],[jo]:[ii,ri,Y],[Yo]:[],[Vo]:[ai,Y,Wn,Me,An,wn,ii,ri]},si={sign:et,body:(e,t)=>{t.baseIndex=[e.calibration]}},ui={[$o]:[],[zo]:[ai,Y,Wn,Me,An,wn],[qo]:[Y],[Jo]:[Wn,Y,An,wn],[Zo]:[si,Me],[Qo]:[si,Me]},yc=(e,t)=>e(t),Sc=(e,t)=>e(t),_c=(e,t,n)=>e(t,n),Ic=(e,t,n)=>e(t.overlay,n),vc=(e,t,n)=>e(t.cursorIndex,n.indexList),kc=(e,t,n)=>e(t.overlay,n.baseIndex),kn={[It]:yc,[pn]:Sc,[fn]:_c,[et]:Ic,[vt]:vc,[Tn]:kc};var Wc=(e=-1,t,n,o,r,i)=>(o<n?1:0)+(t>0?2:0)+(o===n?4:0)+(o===r?8:0)+(i>e+1?16:0),Ac=(e,t,n,o)=>(n<t?1:0)+(o>0?2:0)+(e===1&&o===0?32:0),di=(e,t)=>(n,o)=>{let r=n,i=t.positionList.get(o);i!==void 0&&(r=i(n,e,t));let s={selectionBufferIndex:e.selectionBuffer.length-1,selectionBuffer:e.selectionBuffer,renderOptions:r};He(s,yn,oi),t.renderOption[o].push(s)},xi=(e,t)=>{e.duplicateOverlayIndex=e.lineBuffer.get(e.currentLine);let n=ci(e,t);if(e.duplicateOverlayIndex!==void 0){let r=Wc(e.duplicateOverlayIndex,e.overlay.calibration,e.baseLine,e.currentLine,e.previousLine,e.lineBuffer.size);return li[r].forEach(n),!0}let o=Ac(e.selectionBuffer.length,e.baseLine,e.currentLine,e.overlay.calibration);return ui[o].forEach(n),!1},Ut=(e,t)=>{if(xi(e,t)){Xt(e);return}e.lineBuffer.set(e.currentLine,e.overlayIndex),Xt(e),t.contentText.forEach(di(e,t))},Pn=(e,t)=>{if(xi(e,t)){Xt(e),t.columnList?.push(e.selectionBuffer.length-1);return}e.lineBuffer.set(e.currentLine,e.overlayIndex),Xt(e),t.contentText.forEach(di(e,t))},rt=(e,t,n,o)=>{o.lineFn.idx=n.cursorIndex,n.currentLine=e.end.line,n.selectionBuffer.push(e),o.statusFnChain.forEach(o.accumulate),t(n,o)},Bn=(e,t,n)=>o=>{rt(o,e,t,n)},jt=(e,t)=>{t.lineFn.editor.selections.forEach(Bn(Pn,e,t))},fi=(e,t)=>{t.lineFn.editor.selections.forEach(Bn(Pn,e,t))},pi=(e,t)=>{rt(t.lineFn.editor.selections[e.lastCount],Pn,e,t)},Ti=(e,t)=>{t.lineFn.editor.selections.forEach(Bn(Ut,e,t))},Ei=(e,t)=>{rt(t.lineFn.editor.selections[0],Ut,e,t),rt(t.lineFn.editor.selections[1],Ut,e,t)},mi=(e,t)=>{rt(t.lineFn.editor.selections[e.lastCount],Ut,e,t)},Xt=e=>{e.previousLine=e.currentLine,e.cursorIndex++,e.overlayIndex++};var le=(e,t)=>{e.baseLine=t.lineFn.editor.selection.end.line,e.cursorIndex=0};var it=(e,t)=>{Zr(t.lineFn.editor)&&(e.baseLine=t.lineFn.editor.selection.end.line,e.currentLine=t.lineFn.editor.selections[t.lineFn.editor.selections.length-1].end.line)},Yt=(e,t)=>{Qr(t.lineFn.editor)};var $={...ir},Fn={...er},P={[C]:[],[O]:[],[S]:[],[T]:[],[E]:[]},W={[C]:[],[O]:[],[S]:[],[T]:[],[E]:[]},ct={[C]:void 0,[O]:void 0,[_]:void 0,[w]:void 0,[T]:[]},Hn={...Ce},gi=(e,t=0)=>{let n=e.selection.active.character+t,o=e.document.lineAt(e.selection.active.line).text.length+t;return n===o?n:n+"/"+o},wc={col:e=>gi(e,1),zCol:e=>gi(e)},Pc={char:e=>e.selection.end.character-e.selection.start.character},Kn={ln:e=>e.selection.active.line+1},Ci={lc:io,char:so,charOnly:co},Bc={lc:e=>e.selection.end.line-e.selection.start.line+1,char:e=>e.document.getText(e.selection).length,charOnly:e=>e.document.getText(e.selection).replace(Fn.regex,"").length},Oi=(e,t=0,n=0)=>{let o=e.selections[t].active.character+n,r=e.document.lineAt(e.selections[t].active.line).text.length+n;return o===r?o:o+"/"+r},hi={count:({editor:e})=>e.selections.length,ln:({editor:e,idx:t})=>e.selections[t].end.line+1,lc:({editor:e,pos:t})=>e.selection.isSingleLine?e.selections.length:e.selections.length*(e.selections[t].end.line-e.selections[t].start.line+1),char:({editor:e,pos:t})=>e.selection.isSingleLine?e.selections[t].end.character-e.selections[t].start.character:e.document.getText(e.selections[t]).replace(Fn.regex,"").length},Hc={col:0,zCol:0},Vt={ln:0},Kc={char:0},Di={col:po,zCol:To,nth:ao,count:lo,ln:uo,lc:xo,char:fo},Mc={cursorOnlyText:{...Hc,...Vt},singleLineText:{...Vt,...Kc},multiLineCursorText:{...Vt,...Ci},multiLineAnchorText:{...Vt,...Ci},multiCursorText:Di,multiCursorEdit:Di},Li={col:Nr,zCol:br},Fe={char:_r,ln:Sr},Mn={lc:yr,charOnly:Ir},Ri={nth:vr,count:kr},Ni={cursorOnlyText:{...Li,...Fe},singleLineText:{...Fe},multiLineCursorText:{...Fe,...Mn},multiLineAnchorText:{...Fe,...Mn},multiCursorText:{...Ri,...Fe,...Mn},multiCursorEdit:{...Ri,...Li,...Fe}},Fc=(e,t)=>({get range(){return ct[e]},renderOptions:t}),Gc=(e,t)=>{P[e].forEach((n,o)=>{let r=[];t?.forEach(i=>{r.push(Fc(i,$[i].contentText[o]))}),W[e].push(r)})},Ue={[C]:[],[O]:[],[S]:[],[T]:[],[E]:[]},Uc=(e,t,n)=>{t.forEach(o=>{Object.hasOwn(n,o[1])&&Ue[e].push([o[1],n[o[1]]])})},bi=(e,t,n)=>{Hn.isWholeLine=!0,Hn.rangeBehavior=at.DecorationRangeBehavior.ClosedClosed;let o=t;for(;o--;){let s=at.window.createTextEditorDecorationType(Hn);P[e].push(s)}W[e].length>0&&(W[e]=[]);let i={[C]:{renderOptionHex:[C],fnObject:{...Kn,...wc}},[O]:{renderOptionHex:[O],fnObject:{...Kn,...Pc}},[S]:{renderOptionHex:[_,w],fnObject:{...Kn,...Bc}},[T]:{renderOptionHex:[T],fnObject:{...hi}},[E]:{renderOptionHex:[E],fnObject:{...hi}}}[e];Gc(e,i.renderOptionHex),Uc(e,n,i.fnObject)},Xe=(e,t,n)=>{switch(t){case u:yi[e]=n;break;case f:ki[e]=n;break;case d:Ai[e]=n;break;case T:Pi[e]=n;break;case E:Bi[e]=n;break;default:break}},Gn=(e,t)=>(n,o)=>e(t[o],n),Un=(e,t)=>([n,o])=>{e[n].contentText=o(t).toString()},yi={ln:void 0,col:void 0,zCol:void 0},Si=(e,t)=>{Object.hasOwn(st,e)&&(st[e]=t)},_i=(e,t)=>{Object.hasOwn(k,e)&&(k[e]=t)},Xn=()=>{$t.contentText=$[T].contentText,V.contentText=$[E].contentText},Ii=()=>{st.nth&&(In($[T].contentText[st.nth],$t),$t.positionList.set(st.nth,Sn)),k.nth&&(In($[E].contentText[k.nth],V),V.positionList.set(k.nth,Sn)),k.col?(vn($[E].contentText[k.col],Oi,1,V),V.positionList.set(k.col,_n)):k.zCol&&(vn($[E].contentText[k.zCol],Oi,0,V),V.positionList.set(k.zCol,_n))},lt=(e,t)=>{switch(e[0]){case u:P[C]?.forEach(ae(t));break;case f:P[O]?.forEach(ae(t));break;case d:P[S]?.forEach(ae(t));break;case p:Ki();break;default:break}},vi=(e,t)=>{u!==t[0]&&lt(t,e.setDecorations),Ue[C].forEach(Un(yi,e)),ct[C]=ie(e.selection.active),W[C].forEach(Gn(e.setDecorations,P[C]))},ki={ln:void 0,char:void 0},Wi=(e,t)=>{lt(t,e.setDecorations),Ue[O].forEach(Un(ki,e)),ct[O]=ie(e.selection.active),W[O].forEach(Gn(e.setDecorations,P[O]))},Ai={ln:void 0,lc:void 0,char:void 0,charOnly:void 0},wi=(e,t)=>{d!==t[0]&&lt(t,e.setDecorations),Ue[S].forEach(Un(Ai,e)),ct[_]=ie(e.selection.anchor),ct[w]=ie(e.selection.active),W[S].forEach(Gn(e.setDecorations,P[S]))},Pi={nth:void 0,count:void 0,ln:void 0,lc:void 0,char:void 0},Bi={nth:void 0,count:void 0,ln:void 0,col:void 0,zCol:void 0},Hi=(e,t,n)=>([o,r])=>{switch(o){case"char":t[o]+=r(e),n[o].contentText=t[o].toString();break;default:n[o].contentText=r(e).toString();break}},Xc={baseIndexRefBuffer:[],indexListRefBuffer:[],calibration:0},de={editor:at.window.activeTextEditor,pos:0,char:0,idx:0},ue={nth:0,count:0,ln:0,lc:0,char:0},jc=()=>{ue.nth=0,ue.count=0,ue.ln=0,ue.lc=0,ue.char=0},st={nth:null,ln:null},k={nth:null,col:null,zCol:null},g={strategyKey:0,selectionReference:[],selectionBuffer:[],lineBuffer:new Map,cursorIndex:0,baseLine:-1,currentLine:-1,previousLine:-1,duplicateOverlayIndex:-1,lastCount:0,overlayIndex:0,overlay:Xc},$t={renderOption:W[T],statusFnChain:Ue[T],accumulate:Hi(de,ue,Pi),lineFn:de,positionList:new Map,baseIndex:[],indexList:[],contentText:[]},V={renderOption:W[E],statusFnChain:Ue[E],accumulate:Hi(de,ue,Bi),lineFn:de,positionList:new Map,baseIndex:[],indexList:[],columnList:[],contentText:[]},Ki=()=>(g.strategyKey=0,g.selectionBuffer.length=0,g.lineBuffer.clear(),g.cursorIndex=0,g.baseLine=-1,g.currentLine=-1,g.previousLine=-1,g.duplicateOverlayIndex=-1,g.lastCount=0,g.overlayIndex=0,g.overlay.baseIndexRefBuffer.length=0,g.overlay.indexListRefBuffer.length=0,g.overlay.calibration=0,Xn(),jc(),zt(T,de.editor.setDecorations),zt(E,de.editor.setDecorations),!0);var Yc=(e,t)=>(n,o)=>e(n,t[o]),Vc=(e,t)=>P[e].forEach(Yc(t,W[e])),zt=(e,t)=>{P[e].forEach(ae(t)),W[e].forEach((n,o)=>{W[e][o].length=0})},Ge=(e,t)=>{Ki(),zt(T,t.lineFn.editor.setDecorations),zt(E,t.lineFn.editor.setDecorations)},$c=e=>e?V:$t,zc=e=>e?T+Wt:T,qc=e=>(e&Wt)===Wt,Jc=(e,t,n,o,r,i,s)=>{let a=r===-1,c=e!==t,l=o===0,x=o===n,y=n>2,sn=n-o===1,qe=s<i,Ps=s===i,Bs=s>i,Hs=i<s,Ks=s===r,Ms=s>r,Fs=0|(e?1:0)|(t?2:0)|(c?16:0)|(a?32:0)|(l?256:0)|(x?512:0)|(y?1024:0)|(sn?4096:0)|(qe?65536:0)|(Ps?1<<17:0)|(Bs?1<<18:0)|(Hs?1<<19:0)|(Ks?1<<20:0)|(Ms?1<<21:0);return{2883872:mn,2888704:U,2233344:U,1119232:U,1184768:U,70656:U,66560:U,2884896:En,2884899:kt,2883875:kt,2888707:gn,2233347:Oe,2167811:Oe,70659:Oe,66563:Oe,2229763:X,2885123:X,2884611:X,2229251:X,2163715:X,2164227:X,2229265:G,2228241:G,2229777:G,1114115:G,2162691:G,2228739:G}[Fs]},Zc={[mn]:[Ge,le,Ei],[U]:[mi],[En]:[Ge,le,it,Ti],[kt]:[Ge,le,it,jt],[gn]:[Yt,pi],[Oe]:[Ge,le,it,Yt,jt],[X]:[Ge,le,fi],[G]:[it,Yt,Ge,le,jt]},Qc=e=>e.selection.isEmpty!==e.selections[e.selections.length-1].isEmpty?(e.selections=[...e.selections.slice(0,e.selections.length-1)],!0):!1,ea=(e,t)=>n=>n(e,t),Mi=(e,t)=>{Qc(e)&&(t[0]=p),p!==t[0]&&lt(t,e.setDecorations),g.strategyKey=Jc(e.selection.isEmpty,e.selections[e.selections.length-1].isEmpty,e.selections.length,g.lastCount,g.baseLine,g.previousLine,e.selections[e.selections.length-1].end.line);let n=qc(g.strategyKey);Zc[g.strategyKey].forEach(ea(g,$c(n))),Vc(zc(n),e.setDecorations),g.lastCount=e.selections.length},Fi=e=>{de.editor=e},Gi=e=>{for(let t of ve)lt([t],e.setDecorations)};var qt=()=>({functionOf:Mc,textOf:$,infoOf:Fn});var ut={[u]:[],[f]:[],[d]:[],[p]:[]},dt={...tr},Ui=e=>jn.window.createTextEditorDecorationType(e),xt=(e,t,n)=>e(t,n),ae=e=>t=>e(t,v),Xi=e=>{e.eventTrigger[0]=Eo,e.appliedHighlight[0]=u,e.diagnosticSignature[0]=H},ta=e=>{qn(e),Gi(e),qr(e.setDecorations)},z=()=>jn.window.visibleTextEditors.forEach(ta),Jt=e=>{let t=qt();t.infoOf.size=Number(e.options.tabSize??e.options.indentSize??4),t.infoOf.type=e.options.insertSpaces?`
`:"	",t.infoOf.regex=e.options.insertSpaces?Wr(t.infoOf.size):Ar},na=(e,t,n)=>o=>{let r=[];r.push(t[o]),e.generalConfigInfo.selectionTextEnabled&&r.push(n[o]),e.generalConfigInfo.diagnosticTextEnabled&&(o===u||o===f)?r.push(oa):e.generalConfigInfo.diagnosticTextEnabled&&r.push(ot(dt)),ut[o].push(...r)},je=e=>{let t={[u]:Yn,[f]:Vn,[d]:$n,[p]:zn},n={[u]:vi,[f]:Wi,[d]:wi,[p]:Mi};ve.forEach(na(e,t,n))},oa=e=>{e.selections[0].start.line!==dt.previousLine[0]&&ot(dt)(e),e.document.isDirty&&We(e),dt.previousLine[0]=e.selections[0].start.line},ra=(e,t)=>n=>n(e,t),Ye=(e,t)=>{let n=ra(e,t);return e.selections.length===1?e.selections[0].isEmpty?(ut[u].forEach(n),u):e.selections[0].isSingleLine?(ut[f].forEach(n),f):(ut[d].forEach(n),d):(ut[p].forEach(n),p)},ji=()=>({stateOf:dt});var B={...nr},ia={...or},Yn=(e,t)=>{u!==t[0]&&qn(e),xt(e.setDecorations,B[u][0],[ie(e.selection.active)])},Vn=(e,t)=>{f!==t[0]&&xe(e.setDecorations,t,v),xt(e.setDecorations,B[f][0],[dr(e.selection.start,e.selection.end)])},Zt=[[Object.create(null)],[Object.create(null)],[Object.create(null)]],sa=(e,t)=>(n,o)=>e(n,t[o]),$n=(e,t)=>{d!==t[0]&&xe(e.setDecorations,t,v),Zt[0][0]=e.document.lineAt(e.selection.start).range,Zt[1][0]=e.document.lineAt(e.selection.end).range,Zt[2][0]=e.selection,B[d].forEach(sa(e.setDecorations,Zt))},zn=(e,t)=>{xe(e.setDecorations,t,v),xt(e.setDecorations,B[p][0],[...e.selections]),xt(e.setDecorations,B[p][1],[...e.selections])},Qt=(e,t)=>n=>e(n,t),xe=(e,t,n)=>{switch(t[0]){case u:B[u].forEach(Qt(e,n));break;case f:B[f].forEach(Qt(e,n));break;case d:B[d].forEach(Qt(e,n));break;case p:B[p].forEach(Qt(e,n));break;default:break}},qn=e=>{xe(e.setDecorations,[u],v),xe(e.setDecorations,[f],v),xe(e.setDecorations,[d],v),xe(e.setDecorations,[p],v)},Zl={[u]:(e,t)=>Yn(e,t),[f]:(e,t)=>Vn(e,t),[d]:(e,t)=>$n(e,t),[p]:(e,t)=>zn(e,t)};var Yi=()=>({styleOf:B,infoOf:ia});var ts=h(require("vscode"));var ft=h(require("vscode"));var Jn=class{#e;#t;constructor(t,n){this.#e=t,this.#t=n}get(){return{section:this.#e,message:this.#t}}},Zn=class{static ignored=!1;static notified=!1;static packageName;static errorList=[];static configurationSectionList(){return this.errorList.map(t=>t.get().section)}static ifExtensionName(t){return t.indexOf(this.packageName)!==-1&&t.split(".").length>2?t.replace(this.packageName+".",""):t}static pushErrorMessage(){return ft.window.showErrorMessage("Please revise invalid values in configuration.","Fix Configuration","Ignore")}static userSelect(t){return function(n){return n==="Fix Configuration"?(ft.commands.executeCommand("workbench.action.openSettings",t),!1):!0}}static fixConfiguration(){return async()=>{this.ignored=await this.pushErrorMessage().then(this.userSelect(this.configurationSectionList().join(" ")))}}static pushMessage(t){return()=>ft.window.showInformationMessage(t)?.then(()=>{})}},L=class extends Zn{static configurationUpdated(){this.notified=!1,this.ignored=!1}static setPackageName(t){this.packageName=t}static check(){return this.errorList.length>0}static register(t,n){return this.errorList.push(new Jn(t,n))}static clear(){this.errorList.splice(0)}static notify(t=0){if(this.check()&&!this.notified&&!this.ignored){this.notified=!0,setTimeout(this.fixConfiguration(),t);return}setTimeout(this.pushMessage("Config has been updated succeefully. Configuration Reloaded... (Messaage Dismiss in 2 second.)"),t)}};var en=h(require("vscode"));var Vi=()=>{let e=b("editor");e.update("renderLineHighlight","gutter",en.ConfigurationTarget.Global),e.update("roundedSelection",!1,en.ConfigurationTarget.Global)};var pt=e=>{if(!(!e||e==="null"||e.length===0||Pt.test(e)))return e},$i=e=>e.filter(t=>t!==void 0&&t.length>0||typeof t!="string"),zi=e=>e==="null"||e.length===0?null:e;var tn=(e,t,n,o)=>{let r=o||4,i=[];for(;r--;)e>>r&1?i.push(Array.isArray(t)?t[r]:t):i.push(n);return i};var qi=(e,t)=>{let n=e.match(t),o=[];if(n&&n.index!==void 0)return o=e.split(t),o[0].length===0?(delete o[0],{position:0,array:[...o]}):o[2].length===0?(delete o[2],{position:1,array:[...o]}):{position:1,array:o}},K=(e,t=.6,n,o)=>{e=e.replace(/^#/,""),e.length===3&&(e=e.split("").map(c=>c+c).join("")),/^[0-9A-Fa-f]{6}$/.test(e)||(e=n.replace(/^#/,""),t=o);let i=parseInt(e.substring(0,2),16),s=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16);return`rgba(${i}, ${s}, ${a}, ${t})`};var Ji=(e,t)=>e.length===t.length&&e.every((n,o)=>n[0]===t[o][0]&&n[1]===t[o][1]);var Zi=h(require("vscode"));var Qi=e=>`0 0 0 ${e}`,aa=e=>{if(e)return{...e,array:e.array.filter(t=>t!==void 0)}},nn=(e,t)=>{let n={...e};return n.after={...e.after},n.after.contentText=t,n},la=(e,t,n,o,r,i)=>{let s=aa(qi(r.nextSearchString,o));s&&(Object.hasOwn(t,n)&&(s.array[s.position]=t[n]),i?(e.contentText?.push(...s.array),e.position[r.lastPosition+s.position]=n):s.position===0?(e.contentText?.push(s.array[0]),e.position[r.lastPosition+s.position]=n,r.nextSearchString=s.array[1],r.lastPosition=r.lastPosition+s.position+1):s.position===1&&s.array.length===2?(e.position[r.lastPosition+s.position]=n,e.contentText?.push(...s.array)):s.position===1&&s.array.length===3&&(e.contentText?.push(s.array[0],s.array[1]),e.position[r.lastPosition+s.position]=n,r.nextSearchString=s.array[2],r.lastPosition=r.lastPosition+s.position+1))},es=(e,t,n,o,r)=>{let i=e.match(wr);if(i!==null&&Object.hasOwn(o,t)){i.length>Object.keys(o[t]).length&&L.register(r+"."+t,"numbers of placeholder exceed availability");let s={nextSearchString:e,lastPosition:0};n.textOf[t].contentText=[],i.forEach((a,c)=>{let l=a.match(Pr);l&&(Object.hasOwn(o[t],l[1])?la(n.textOf[t],n.functionOf[t],l[1],o[t][l[1]],s,c===i.length-1):L.register(r+"."+t,`Invalid placeholder '${l[1]}' is set in user configration. Load default value instead for now. Please revise the value entered.`))}),n.textOf[t].contentText=$i(n.textOf[t].contentText)}else n.textOf[t].contentText=[e]},Tt=(e,t=!0,n=void 0)=>{let o={...Ce};if(o.isWholeLine=t,o.rangeBehavior=Zi.DecorationRangeBehavior.ClosedOpen,o.after={...bo},n&&(o.after.contentText=n),!!e.color)return o.after.color=K(e.color,e.colorOpacity,"#333333",.7),e.backgroundColor&&e.backgroundColor!=="null"&&e.backgroundColor.length>0?o.after.backgroundColor=K(e.backgroundColor,e.backgroundOpacity,"#333333",.7):delete o.after.backgroundColor,e.fontWeight!=="normal"?o.after.fontWeight=e.fontWeight:delete o.after.fontWeight,e.fontStyle!=="normal"?o.after.fontStyle=e.fontStyle:delete o.after.fontStyle,delete o.after.margin,delete o.after.textDecoration,o};var b=e=>ts.workspace.getConfiguration(e),Qn={borderColor:{of:"borderOpacity",fn:(e,t,n)=>K(e,t,n)},backgroundColor:{of:"backgroundOpacity",fn:(e,t,n)=>K(e,t,n)}},Et=(e,t,n,o)=>{try{let r=e.get(t,n);return r===void 0&&console.warn(`Config value for ${t} is undefined or caused an error. Using default value.`),typeof r=="string"?zi(r):r}catch(r){return o&&L.register(o+"."+t,`Failed to get config value for ${o+"."+t}:`),console.error(`Failed to get config value for ${e+"."+t}:`,r),e.inspect(t)?.defaultValue}},mt=(e,t,n,o,r)=>{Object.entries(e).forEach(([i,s])=>{if(typeof s!="object"){let a=Et(b(t),i,"not found",t);if(a&&r&&o&&n&&n.includes(i)){let c={contentText:[],position:{}};o.textOf[i]={...c},es(a,i,o,r,t)}Object.hasOwn(e,i)&&a!==void 0&&(e[i]=a)}else mt(e[i],t+"."+i,n,o)})};var ua=e=>e,da=(e,t)=>{let n=Lo[t],o=Ho,r=b(e.name+"."+n);return Object.entries(o).reduce((i,[s,a])=>{let c=Et(r,ua(s),a,e.name+"."+n);if(c!=null)if(Object.hasOwn(Qn,s)){let l=Qn[s];i[s]=l.fn(c,e.generalConfigInfo[l.of],a)}else i[s]=c;return i},{})},xa=e=>(e.border=`${e.borderStyle} ${e.borderColor};`,delete e.borderStyle,delete e.borderColor,e),fa=(e,t,n)=>{try{let o=n(e,t);if(!o||o.length===0)return;let r=o.reduce((i,s)=>{let a={...e};return a.borderWidth=s,i.push(a),i},[]).reduce((i,s,a)=>(t===d&&a!==2&&delete s.backgroundColor,i.push(Ui(xa(s))),i),[]);return r.length===0?void 0:r}catch(o){console.log("creating decoration type thrown error:",t,o);return}},pa=(e,t)=>{if(Object.hasOwn(_t,t))return Object.hasOwn(_t[t],String(e.borderPosition))?Ta(e,_t[t][e.borderPosition]):void 0},Ta=(e,t)=>{let n=[];for(let o of t){let r=tn(o,String(e.borderWidth),"0");n.push(r.join(" "))}return n},Ea=(e,t)=>{let n=t.replaceAll(" ","").split("|"),o=!1,r=!1,i=!1,s=!1,a=!1;return n.length>1&&(o=/isWholeLine/s.test(n[1]),r=/beforeCursor/s.test(n[1]),i=/afterCursor/s.test(n[1]),s=/atLineStart/s.test(n[1]),a=/selectionOnly/s.test(n[1]),e===d&&n[0]==="left"&&(o=!0)),{isWholeLine:o,borderPosition:n[0],beforeCursor:r,afterCursor:i,atLineStart:s,selectionOnly:a}},gt=e=>{for(let t in e.generalConfigInfo)if(t==="diagnosticTextEnabled"||t==="selectionTextEnabled"){let n=Oo[t],o=b(e.name+"."+n[0]),r=Et(o,n[1],xn[t],e.name+"."+n[0]);e.generalConfigInfo[t]=r}else{let n=b(e.name+"."+I.general);e.generalConfigInfo[t]=Et(n,t,xn[t],e.name+"."+I.general)}},A=(e,t)=>{let n=Yi();n.styleOf[t]&&n.styleOf[t].forEach(s=>s.dispose());let o=da(e,t),r=Ea(t,String(o.borderPosition));n.infoOf[t]=r,o.borderPosition=r.borderPosition,o.isWholeLine=r.isWholeLine;let i=fa(o,t,pa);if(!i)return!1;n.styleOf[t]=i,delete n.styleOf,delete n.infoOf},ns=e=>{gt(e);for(let t of ve)A(e,t);return!0};var eo=h(require("vscode"));var os={borderOpacity:"general.borderOpacity",backgroundOpacity:"general.backgroundOpacity",statusTextEnabled:"selectionText.enabled",statusTextIconEnabled:"selectionText.iconEnabled",statusTextColor:"selectionText.color",statusTextBackgroundColor:"selectionText.backgroundColor",statusTextOpacity:"selectionText.opacity",statusTextFontStyle:"selectionText.fontStyle",statusTextFontWeight:"selectionText.fontWeight",cursorOnlyBorderColor:"cursorOnly.borderColor",cursorOnlyBackgroundColor:"cursorOnly.backgroundColor",cursorOnlyBorderPosition:"cursorOnly.borderPosition",cursorOnlyBorderWidth:"cursorOnly.borderWidth",cursorOnlyBorderStyle:"cursorOnly.borderStyle",cursorOnlyBorderStyleWithafterCursor:"cursorOnly.borderStyleWithafterCursor",singleLineBorderColor:"singleLine.borderColor",singleLineBackgroundColor:"singleLine.backgroundColor",singleLine:"singleLine.borderPosition",singleLineBorderWidth:"singleLine.borderWidth",singleLineBorderStyle:"singleLine.borderStyle",multiLineBorderColor:"multiLine.borderColor",multiLineBackgroundColor:"multiLine.backgroundColor",multiLineBorderPosition:"multiLine.borderPosition",multiLineBorderWidth:"multiLine.borderWidth",multiLineBorderStyle:"multiLine.borderStyle",multiCursorBorderColor:"multiCursor.borderColor",multiCursorBackgroundColor:"multiCursor.backgroundColor",multiCursorBorderPosition:"multiCursor.borderPosition",multiCursorBorderWidth:"multiCursor.borderWidth",multiCursorBorderStyle:"multiCursor.borderStyle"},ma=(e,t,n)=>e.update(t,n,eo.ConfigurationTarget.Global),ga=(e,t)=>e.update(t,void 0,eo.ConfigurationTarget.Global),rs=async e=>{let t=b(e.name);Object.entries(t).forEach(async([n,o])=>{if((typeof o=="string"||typeof o=="number"||typeof o=="boolean")&&Object.hasOwn(os,n)){let r=os[n];await ma(t,r,o),await ga(t,n)}})};var Ca=(e,t)=>e.contentText.map((n,o)=>{let r=typeof n=="string"?t.placeholderDecorationOption:t.selectionDecorationOption[e.position[o]],i=nn(r,n);return typeof n=="symbol"&&(e.position[o]=i.after.contentText),i}).filter(n=>n!==void 0),Oa=(e,t)=>{t.placeholderDecorationOption=Tt(e,!0),Object.keys(t.selectionDecorationOption).forEach((n,o)=>{let r={color:e.selectionCountTextStyle[n],colorOpacity:e.selectionCountTextStyle.opacity,fontStyle:e.selectionCountTextStyle.fontStyle,fontWeight:e.selectionCountTextStyle.fontWeight};t.selectionDecorationOption[n]=Tt(r,!0)})},ha=(e,t)=>{Object.entries(t.cursorOnlyText.position).forEach(([c,l])=>{let x=e[C].contentText[c].after;Xe(l,u,x)}),Object.entries(t.singleLineText.position).forEach(([c,l])=>{let x=e[O].contentText[c].after;Xe(l,f,x)});let r=Object.entries(t.multiLineAnchorText.position),i=Object.entries(t.multiLineCursorText.position);Ji(r,i)&&r.forEach(([c,l],x)=>{let y=e[_].contentText[c].after;e[w].contentText[c].after=y,Xe(l,d,y)}),Object.entries(t.multiCursorText.position).forEach(([c,l])=>{let x=e[T].contentText[c].after;Xe(l,T,x),Si(l,parseInt(c))}),Object.entries(t.multiCursorEdit.position).forEach(([c,l])=>{let x=e[E].contentText[c].after;Xe(l,E,x),_i(l,parseInt(c))}),Xn(),Ii()},Da=(e,t,n,o)=>{Object.entries(t).forEach(([l,x],y)=>{let sn=Ca(x,n),qe=ho[l];e[qe]={contentText:sn,position:Object.entries(x.position)},(o&&o!=="0px"||o!=="0em")&&e[qe].contentText[0]&&(e[qe].contentText[0].after.margin=Qi(o))});let r=e[C],i=e[O],s=e[_],a=e[T],c=e[E];[[C,r.contentText.length,r.position],[O,i.contentText.length,i.position],[S,s.contentText.length,s.position],[T,a.contentText.length,a.position],[E,c.contentText.length,c.position]].forEach(([l,x,y])=>{bi(l,x,y)}),ha(e,t)},Ve=(e,t=!1)=>{let n={...Do},o={...No},r=qt(),i={functionOf:r.functionOf,textOf:{}};return mt(n,e+"."+I.selectionText,Ro,i,Ni),Oa(n,o),Da(r.textOf,i.textOf,o,n.leftMargin),delete r.functionOf,delete r.infoOf,delete r.textOf,delete i.textOf,delete i.functionOf,!0};var La=["pre","post"],Ra={pre:"prefix",post:"postfix"},Na=(e,t,n)=>{let o=t.sidePadding!=="null"?t.sidePadding:null,r=t.topDownPadding!=="null"?t.topDownPadding:null;Object.entries(e).forEach(([i,s])=>{s.map(a=>a.filter(c=>c.length>0)).forEach((a,c,l)=>{t.backgroundColor&&t.backgroundOpacity&&(e[i][c][0].renderOptions.after.backgroundColor=K(t.backgroundColor,t.backgroundOpacity,"#333333",.7)),t.borderRadius&&(c===0&&(e[i][0][0].renderOptions.after.textDecoration=`;border-top-left-radius:${t.borderRadius};border-bottom-left-radius:${t.borderRadius};padding-left:${o}`),c===l.length-1&&(e[i][c][0].renderOptions.after.textDecoration=`;border-top-right-radius:${t.borderRadius};border-bottom-right-radius:${t.borderRadius};padding-right:${o}`)),r&&(e[i][c][0].renderOptions.after.textDecoration+=`;padding-top:${r};padding-bottom:${r}`),n!=="0px"&&n!=="0em"&&n&&c===0&&(e[i][0][0].renderOptions.after.textDecoration+=`;margin-left:${n}`)})})},ba=({textPosition:e,primaryStyle:t,secondaryStyle:n,notation:o,leftMargin:r})=>e.contentText.map((i,s)=>{let a=e.position[s],c=t;if(La.includes(a)){if(!Object.hasOwn(o,Ra[a]))return;c=n}return nn(c,i)}).filter(i=>i!==void 0),ya=(e,t,n,o,r="")=>{let i=(a,c,l,x)=>{if(Object.hasOwn(c[l],x)){c[l][x].notation&&(a.notation=c[l][x].notation);let y=ba(a);c[l][x].contentText=y}};Object.entries(n).forEach(([a,c])=>{let l=ko[a],x={textPosition:c,primaryStyle:o.diagnosticDecorationOption[l[0]],secondaryStyle:l[1]?o.diagnosticDecorationOption[l[1]]:null,notation:[],leftMargin:r};["workspace","editor","all","layout"].forEach(y=>{i(x,e,y,Wo[a])})});let s=a=>a.contentText.map(c=>(c.after.contentText===Bt&&(c.after.contentText=a.notation.prefix?a.notation.prefix:void 0),c.after.contentText===Ht&&(c.after.contentText=a.notation.postfix?a.notation.postfix:void 0),c)).filter(c=>c.after.contentText!==void 0);e.layout[q].contentText.forEach(a=>{if(a.after.contentText===Ot){let c=s(e.all[Ze]);m(H,[...c])}else m(H,[{...a}])}),e.layout[J].contentText.forEach(a=>{if(a.after.contentText===ht){let c=s(e.editor[Z]),l=s(e.editor[Q]),x=s(e.editor[ee]);m(re,[...c]),m(he,[...c]),m(De,[...c]),m(Le,[...c]),m(Re,[...l]),m(Ne,[...l]),m(be,[...l]),m(ye,[...x]),m(Se,[...x]),m(_e,[...l,...x]);return}if(a.after.contentText===Dt){let c=s(e.workspace[te]),l=s(e.workspace[ne]),x=s(e.workspace[oe]);m(re,[...c]),m(he,[...l]),m(De,[...x]),m(Le,[...l,...x]),m(Re,[...l]),m(Ne,[...x]),m(be,[...l,...x]),m(ye,[...x]),m(Se,[...l,...x]),m(_e,[...l,...x]);return}hn.forEach(c=>{m(c,[{...a}])})})},is=(e,t)=>t!=="null"&&t.length>0&&!Pt.test(t)?{[e]:t}:{},Sa=(e,t,n)=>({[e]:{...vo,notation:{...is("prefix",t),...is("postfix",n)}}}),to=(e,t,n,o)=>{let r=n+"Prefix",i=n+"Postfix";if(e[t][r]!==void 0&&e[t][i]!==void 0)return Sa(o[t],e[t][r],e[t][i])},_a=(e,t)=>{let n={},o={},r={1:{styleName:"okNotationTextStyle",target:[o,n]},2:{styleName:"warningNotationTextStyle",target:[o]},4:{styleName:"errorNotationTextStyle",target:[o]}};return Object.entries(r).forEach(([i,s])=>{t&Number(i)&&e[s.styleName]&&s.target.forEach(a=>{a[i]={color:K(e[s.styleName].color,e[s.styleName].colorOpacity,"#333333",.7)}})}),{[J]:{override:Object.keys(o).length>0?o:void 0},[q]:{override:Object.keys(n).length>0?n:void 0}}},Ia=(e,t,n,o,r)=>{let i={workspace:{},editor:{},all:{},layout:{[J]:{},[q]:{}}};e.leftMargin&&(t.leftMargin=e.leftMargin),n.forEach(c=>{let l={color:pt(e[c].color),colorOpacity:e[c].colorOpacity,backgroundColor:pt(e[c].backgroundColor),backgroundOpacity:e[c].backgroundOpacity,fontStyle:pt(e[c].fontStyle),fontWeight:pt(e[c].fontWeight)};t.diagnosticDecorationOption[c]=Tt(l,!0),i.workspace={...i.workspace,...to(e,c,"workspace",_o)},i.editor={...i.editor,...to(e,c,"editor",So)},i.all={...i.all,...to(e,c,"all",Io)}});let s=r.workspace|r.editor,a=o.overrideLayoutPlaceholderColorToHighestSeverity?_a(e,s):void 0;return{...i,layout:{[J]:{},[q]:{},...a}}},ss=(e=!1,t=!1)=>{let n=7;return n^=e?1:0,n^=t?2:0,n},va=e=>{let t=7,n=7;return e.DiagnosticKind==="workspace Only"&&(n=0,t&=ss(e.hideOk,e.hideWarning)),e.DiagnosticKind==="editor Only"&&(t=0,n&=ss(e.hideOk,e.hideWarning)),{workspace:t,editor:n}},ka=(()=>{let e=[...Ao];return e.reverse().push(["0","0"]),e})(),Wa=e=>[...tn(e,ka,0,4).filter(t=>t!==0).flat(),"diagnosticPlaceholderTextStyle"],Aa=(e,t)=>{e[fe]=t.openningBracket,e[pe]=t.closingBracket,e[Te]=t.lineEqual,e[Ee]=t.lineUp,e[me]=t.lineDown},cs={initalCursor:{default:xr,auto:fr},lastCursor:{default:pr,auto:Tr}},wa=(e,t)=>{let n=t.overlayCursorPosition==="initial cursor"?cs.initalCursor:cs.lastCursor;switch(t.placeTextOnPreviousOrNextLine){case"previousLine":e.rangeFunction=n.default(-1);break;case"previousLine (auto-inline)":e.rangeFunction=n.auto(-1);break;case"nextLine":e.rangeFunction=n.default(1);break;case"nextLine (auto-inline)":e.rangeFunction=n.auto(1);break;default:ar(t.autoInlineDatumPoint),e.rangeFunction=wt;break}},$e=async(e,t=!1)=>{let n={...yo},o={...Bo},r={layout:{},editor:{},workspace:{},all:{}},i=Jr(),s={functionOf:i.functionOf,textOf:{}};t&&jr(),mt(n,e+"."+I.diagnosticText,wo,s,Vr);let a=n.visibility.overrideAllOk?H:re,c=va(n.visibility),l=Wa(c.workspace|c.editor);return Object.assign(r,Ia(n,o,l,n.visibility,c)),Object.assign(i.configOf,n.visibility),ya(r,i.textOf.contentText,s.textOf,o,n.leftMargin),Na(i.textOf.contentText,n.diagnosticPlaceholderTextStyle,n.leftMargin),Aa(i.textOf.glyphList,n.glyphList),wa(i.functionOf,n.visibility),Hr(a),$r(a),Xr(),delete s.textof,delete s.functionOf,delete i.visibilityOf,delete i.functionOf,delete i.textOf.contentText,delete i.textOf.glyphList,delete i.textof,delete i.configOf,!0};var no={...Co},as=e=>{let t=e?.extension.packageJSON.name;if(!t||(no.name=t,!no.name))return;let n=no,o=ji().stateOf;if(n.configError||(n.configError=[],rs(n)),Vi(),ns(n))return n.generalConfigInfo.selectionTextEnabled&&Ve(n.name),n.generalConfigInfo.diagnosticTextEnabled&&$e(n.name),{config:n,decoration:o}};var ze=h(require("vscode"));var M=h(require("vscode"));var ls=h(require("path"));var us=require("node:fs/promises");var ds=e=>t=>{if(t==="Yes"){for(let n of Object.values(I)){let o=b(e.package.extension.packageJSON.name+"."+n);for(let r of Object.keys(o))typeof o[r]!="function"&&r.length>0&&o.update(r,void 0,!0)}M.window.showInformationMessage("Configuration has been restored to default.")}},xs=()=>Es("Are you sure to restore to default?"),fs=async(e,t)=>{try{let n=e.asAbsolutePath(ls.default.join("resource/preset/",t)),o=await(0,us.readFile)(n,{encoding:"utf-8"});return JSON.parse(o)}catch(n){console.error("Failed to load preset JSON:",n)}},Ba=(e,t,n)=>o=>{if(o==="Yes")return Ts(e,t,n)},ps=(e,t)=>{let n=b(e);for(let o of Object.keys(t))if(n.inspect(o)?.globalValue)return!0;return!1},Ts=async(e,t,n)=>{e.updateCaller=go,M.commands.executeCommand("workbench.view.explorer");let o=b(t),r=Object.keys(n),i=r.length;for(;i--;)if(typeof n[r[i]]=="object"){let s=o.inspect(r[i]);await o.update(r[i],{...s?.globalValue,...n[r[i]]},!0)}else await o.update(r[i],n[r[i]],!0);z(),gt(e),A(e,u),A(e,f),A(e,d),A(e,p),Ve(t,!0),$e(t,!0),je(e),e.updateCaller=void 0},Es=e=>M.window.showWarningMessage(e,"Yes","No"),on=async(e,{presetList:t,fileList:n,placeHolder:o})=>{let r=await M.window.showQuickPick(t.map(i=>({label:i})),{placeHolder:o});if(r&&Object.hasOwn(n,r.label.toString())){let i=e.package.extension.packageJSON.name,s=await fs(e.package,n[r.label.toString()]),a=Ba(e.configInfo,i,s||{});ps(e.package.extension.packageJSON.name,s)?await Es("Configuration will be overwritten. Proceed?").then(a):await a("Yes")}},Ha={presetList:["Detailed","Simple","No Glpyph - Detailed","No Glpyph - Simple","Emoji - Detailed","Emoji - Simple"],fileList:{Detailed:"detailed.json",Simple:"simple.json","No Glpyph - Detailed":"no-glyph-detailed.json","No Glpyph - Simple":"no-glyph-simple.json","Emoji - Detailed":"emoji-detailed.json","Emoji - Simple":"emoji-simple.json"},placeHolder:" ... Select the Preset"},Ka={presetList:["Horizontal","Vertical"],fileList:{Horizontal:"orientation-horizontal.json",Vertical:"orientation-vertical.json"},placeHolder:" ... Select the Preset Orientation"},Ma={presetList:["Light","Dark"],fileList:{Light:"color-light-theme.json",Dark:"color-dark-theme.json"},placeHolder:" ... Select the Color Contrast"},Fa={presetList:["Dim","Bright"],fileList:{Dim:"contrast-dim.json",Bright:"contrast-bright.json"},placeHolder:" ... Select the Theme Color"},ms=e=>on(e,Ha),gs=e=>on(e,Ka),Cs=e=>on(e,Ma),Os=e=>on(e,Fa),hs=async e=>{if(M.window.activeColorTheme.kind===M.ColorThemeKind.Light){let t=e.package.extension.packageJSON.name,n=await fs(e.package,"color-light-theme.json");n&&!ps(e.package.extension.packageJSON.name,n)&&await Ts(e.configInfo,t,n)}};var Ds=e=>ze.commands.registerCommand("cursorlinehighlight.applyPreset",()=>ms(e)),Ls=e=>ze.commands.registerCommand("cursorlinehighlight.setColor",()=>Cs(e)),Rs=e=>ze.commands.registerCommand("cursorlinehighlight.setContrast",()=>Os(e)),Ns=e=>ze.commands.registerCommand("cursorlinehighlight.setOrientation",()=>gs(e)),bs=e=>ze.commands.registerCommand("cursorlinehighlight.restoreToDefaultConfiguration",()=>xs().then(ds(e)));var F=h(require("vscode"));var ys=({decorationState:e})=>F.window.onDidChangeWindowState(n=>{n.focused?F.window.activeTextEditor&&(Jt(F.window.activeTextEditor),e.appliedHighlight[0]=Ye(F.window.activeTextEditor,[u])):z(),!n.focused&&!n.active&&(z(),console.log("idling"))}),Ss=({configInfo:e,decorationState:t})=>F.window.onDidChangeActiveTextEditor(n=>{n&&(L.check()&&L.notify(1500),z(),Fi(n),We(n),e.generalConfigInfo.diagnosticTextEnabled&&(Ln(),Rn(),t.eventTrigger[0]=ge),Jt(n),t.appliedHighlight[0]=Ye(n,[u]))}),_s=()=>F.window.onDidChangeTextEditorOptions(e=>{e.textEditor&&Jt(e.textEditor)}),Is=({decorationState:e})=>F.window.onDidChangeTextEditorSelection(t=>{t&&(e.eventTrigger[0]=mo,e.appliedHighlight[0]=Ye(F.window.activeTextEditor,e.appliedHighlight))});var ks=h(require("vscode"));var vs=(e,t)=>{try{L.configurationUpdated();let n={general:()=>gt(e),cursorOnly:()=>A(e,u),singleLine:()=>A(e,f),multiLine:()=>A(e,d),multiCursor:()=>A(e,p),selectionText:()=>{e.generalConfigInfo.selectionTextEnabled&&Ve(e.name,!0)},diagnosticText:()=>{e.generalConfigInfo.diagnosticTextEnabled&&$e(e.name,!0)}};z(),n.general(),n[t]()}catch(n){console.log("confugration update failed. Will notify user.",n)}finally{je(e)}};var Ws=({configInfo:e,decorationState:t})=>ks.workspace.onDidChangeConfiguration(n=>{if(n&&e.updateCaller===void 0){let o=Object.keys(I).find(r=>n.affectsConfiguration(e.name+"."+r));o&&vs(e,o)}});var rn=h(require("vscode"));var As=({configInfo:e,decorationState:t})=>rn.languages.onDidChangeDiagnostics(async n=>{let o=rn.window.activeTextEditor;o&&n&&e.generalConfigInfo.diagnosticTextEnabled&&(t.eventTrigger[0]=ge,ot(t)(o))});var ws=async e=>{try{await e.extension.activate(),L.setPackageName(e.extension.packageJSON.name);let t=await as(e);if(!t){console.error("Failed to initialize config.");return}let n=t.config,o=oo.window.activeTextEditor;je(n),o&&(We(o),Xi(t.decoration),t.decoration.appliedHighlight[0]=Ye(o,[u]));let r={package:e,configInfo:n},i={configInfo:n,decorationState:t.decoration};return hs(r),[Ds(r),Ls(r),Rs(r),Ns(r),bs(r),ys(i),Ss(i),Is(i),_s(),As(i),Ws(i)]}catch(t){console.error("Error during extension initialization: ",t),oo.window.showErrorMessage("Extension initialization failed!")}};function Ya(e){ws(e).then(t=>{t&&e.subscriptions.push(...t)})}function Va(){}0&&(module.exports={activate,deactivate});
